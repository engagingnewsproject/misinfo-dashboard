[debug] [2023-09-01T16:16:28.062Z] ----------------------------------------------------------------------
[debug] [2023-09-01T16:16:28.064Z] Command:       /opt/homebrew/Cellar/node/20.5.1/bin/node /opt/homebrew/bin/firebase emulators:start
[debug] [2023-09-01T16:16:28.064Z] CLI Version:   12.5.2
[debug] [2023-09-01T16:16:28.064Z] Platform:      darwin
[debug] [2023-09-01T16:16:28.064Z] Node Version:  v20.5.1
[debug] [2023-09-01T16:16:28.064Z] Time:          Fri Sep 01 2023 09:16:28 GMT-0700 (Pacific Daylight Time)
[debug] [2023-09-01T16:16:28.064Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-09-01T16:16:28.117Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-09-01T16:16:28.118Z] > authorizing via signed-in user (luke@lukecarlhartman.com)
[debug] [2023-09-01T16:16:28.177Z] openjdk version "11.0.17" 2022-10-18 LTS

[debug] [2023-09-01T16:16:28.178Z] OpenJDK Runtime Environment Zulu11.60+19-CA (build 11.0.17+8-LTS)
OpenJDK 64-Bit Server VM Zulu11.60+19-CA (build 11.0.17+8-LTS, mixed mode)

[debug] [2023-09-01T16:16:28.181Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: auth, functions, firestore, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, storage"}}
[debug] [2023-09-01T16:16:29.829Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:29.829Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:29.830Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:29.830Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:29.830Z] [storage] Storage Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:29.830Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-09-01T16:16:29.833Z] [hub] writing locator at /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/hub-misinfo-5d004.json
[debug] [2023-09-01T16:16:30.316Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:30.316Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-01T16:16:30.316Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub\u001b[22m"}}
[debug] [2023-09-01T16:16:30.318Z] defaultcredentials: writing to file /Users/lukey/.config/firebase/luke_lukecarlhartman_com_application_default_credentials.json
[debug] [2023-09-01T16:16:30.319Z] Setting GAC to /Users/lukey/.config/firebase/luke_lukecarlhartman_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/lukey/.config/firebase/luke_lukecarlhartman_com_application_default_credentials.json"}}
[debug] [2023-09-01T16:16:30.320Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig [none]
[debug] [2023-09-01T16:16:30.667Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig 200
[debug] [2023-09-01T16:16:30.668Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig {"projectId":"misinfo-5d004","storageBucket":"misinfo-5d004.appspot.com","locationId":"us-central"}
[debug] [2023-09-01T16:16:30.684Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-09-01T16:16:30.684Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2023-09-01T16:16:30.684Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/lukey/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.1.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","misinfo-5d004","--rules","/Users/lukey/Sites/misinfo/misinfo-dashboard/firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/lukey/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.1.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"misinfo-5d004\",\"--rules\",\"/Users/lukey/Sites/misinfo/misinfo-dashboard/firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2023-09-01T16:16:31.356Z] Sep 01, 2023 9:16:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:16:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9150\n"}}
[debug] [2023-09-01T16:16:31.370Z] API endpoint: http://127.0.0.1:8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST= {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://127.0.0.1:8080\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST="}}
[debug] [2023-09-01T16:16:31.370Z] 127.0.0.1:8080

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"127.0.0.1:8080\n\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2023-09-01T16:16:34.383Z] Sep 01, 2023 9:16:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
Sep 01, 2023 9:16:33 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:16:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\nSep 01, 2023 9:16:33 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2023-09-01T16:16:34.386Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-09-01T16:16:34.933Z] Temp file directory for storage emulator: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/firebase/storage/blobs"}}
[debug] [2023-09-01T16:16:34.937Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-09-01T16:16:34.937Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-09-01T16:16:34.937Z] Starting Emulator UI with command {"binary":"node","args":["/Users/lukey/.cache/firebase/emulators/ui-v1.11.7/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/lukey/.cache/firebase/emulators/ui-v1.11.7/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-09-01T16:16:34.998Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-09-01T16:16:34.998Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/lukey/Sites/misinfo/misinfo-dashboard/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\" for Cloud Functions..."}}
[debug] [2023-09-01T16:16:35.200Z] Validating nodejs source
[debug] [2023-09-01T16:16:35.728Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:16:35.728Z] Building nodejs source
[debug] [2023-09-01T16:16:35.729Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:16:35.731Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:16:35.736Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8402

[debug] [2023-09-01T16:16:35.909Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:16:35.972Z] Sep 01, 2023 9:16:35 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:16:35 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-09-01T16:16:39.563Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig [none]
[debug] [2023-09-01T16:16:39.901Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig 200
[debug] [2023-09-01T16:16:39.901Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/misinfo-5d004/adminSdkConfig {"projectId":"misinfo-5d004","storageBucket":"misinfo-5d004.appspot.com","locationId":"us-central"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:16:40.947Z] addStorageTrigger {"eventTrigger":{"eventType":"google.storage.object.finalize","resource":"projects/_/buckets/misinfo-5d004.appspot.com"}}
[info] ✔  functions[us-central1-firstGenGenerateThumbnail]: storage function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mstorage\u001b[22m function initialized."}}
[info] ✔  functions[us-central1-addUserRole]: http function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addUserRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addUserRole)."}}
[info] ✔  functions[us-central1-addAdminRole]: http function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addAdminRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addAdminRole)."}}
[info] ✔  functions[us-central1-addAgencyRole]: http function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addAgencyRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/addAgencyRole)."}}
[info] ✔  functions[us-central1-viewRole]: http function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/viewRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/misinfo-5d004/us-central1/viewRole)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Storage        │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-09-01T16:16:44.990Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:16:44.991Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585004990","timestamp":"2023-09-01T16:16:44.990Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585004958","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:16:44.958Z","updated":"2023-09-01T16:16:44.958Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TexXgJ5m3xROKf7i8dLIiWHGYQY","metadata":{"firebaseStorageDownloadTokens":"6264beeb-d94f-4a98-80e6-6d72ae7ba971"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:16:44.958Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media"}}
[debug] [2023-09-01T16:16:44.997Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:16:44.997Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:16:44.997Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:16:44.997Z"],"workRunningCount":1}
[debug] [2023-09-01T16:16:44.998Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:16:44.999Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:16:44.999Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:16:44.999Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:16:44.999Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"27993bfa-ee1e-4782-8925-f311428c8476","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:16:44.958Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585004958","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:16:44.958Z","updated":"2023-09-01T16:16:44.958Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TexXgJ5m3xROKf7i8dLIiWHGYQY","metadata":{"firebaseStorageDownloadTokens":"6264beeb-d94f-4a98-80e6-6d72ae7ba971"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:16:44.958Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media"}}
[debug] [2023-09-01T16:16:45.001Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:16:45.001Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:16:45.001Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:16:45.001Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:16:45.001Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:16:45.001Z"],"workRunningCount":1}
[debug] [2023-09-01T16:16:45.001Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:16:45.002Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:16:45.002Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:16:45.004Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:16:45.005Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:16:45.315Z] [runtime-status] [14805] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:16:45.316Z] [runtime-status] [14805] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:16:45.316Z] [runtime-status] [14805] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:16:45.316Z] [runtime-status] [14805] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:16:45.385Z] [runtime-status] [14805] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:16:45.385Z] [runtime-status] [14805] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:16:45.385Z] [runtime-status] [14805] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:16:45.385Z] [runtime-status] [14805] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:16:45.386Z] [runtime-status] [14805] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:16:45.386Z] [runtime-status] [14805] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:16:45.387Z] [runtime-status] [14805] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:16:45.410Z] [runtime-status] [14805] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:16:45.410Z] [runtime-status] [14805] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7f8918a32e2c6efb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7f8918a32e2c6efb.sock"}}
[debug] [2023-09-01T16:16:45.513Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE"}}
[debug] [2023-09-01T16:16:45.514Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:16:45.514Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY"}}
[debug] [2023-09-01T16:16:45.523Z] [runtime-status] [14805] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585004958","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:16:44.958Z","updated":"2023-09-01T16:16:44.958Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TexXgJ5m3xROKf7i8dLIiWHGYQY","metadata":{"firebaseStorageDownloadTokens":"6264beeb-d94f-4a98-80e6-6d72ae7ba971"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:16:44.958Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media"},"context":{"eventId":"1693585004990","timestamp":"2023-09-01T16:16:44.990Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585004958\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:16:44.958Z\",\"updated\":\"2023-09-01T16:16:44.958Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"TexXgJ5m3xROKf7i8dLIiWHGYQY\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6264beeb-d94f-4a98-80e6-6d72ae7ba971\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:16:44.958Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media\"},\"context\":{\"eventId\":\"1693585004990\",\"timestamp\":\"2023-09-01T16:16:44.990Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585004958","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:16:44.958Z","updated":"2023-09-01T16:16:44.958Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TexXgJ5m3xROKf7i8dLIiWHGYQY","metadata":{"firebaseStorageDownloadTokens":"6264beeb-d94f-4a98-80e6-6d72ae7ba971"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:16:44.958Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585004958","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:16:44.958Z","updated":"2023-09-01T16:16:44.958Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TexXgJ5m3xROKf7i8dLIiWHGYQY","metadata":{"firebaseStorageDownloadTokens":"6264beeb-d94f-4a98-80e6-6d72ae7ba971"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:16:44.958Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585004958\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:16:44.958Z\",\"updated\":\"2023-09-01T16:16:44.958Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"TexXgJ5m3xROKf7i8dLIiWHGYQY\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6264beeb-d94f-4a98-80e6-6d72ae7ba971\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:16:44.958Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585004958\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585004958&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const filePath:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:16:45.526Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 11.64625ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 11.64625ms"}}
[debug] [2023-09-01T16:16:45.526Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE"}}
[debug] [2023-09-01T16:16:45.526Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:16:45.526Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:16:45.526Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:42.688Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:42.688Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585122688","timestamp":"2023-09-01T16:18:42.688Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media"}}
[debug] [2023-09-01T16:18:42.693Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:42.693Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:42.694Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:42.693Z"],"workRunningCount":1}
[debug] [2023-09-01T16:18:42.694Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:42.695Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:42.695Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:42.695Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:42.695Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"b7eab9c9-3d2f-43f9-92ec-84948e63f518","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:18:42.660Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media"}}
[debug] [2023-09-01T16:18:42.697Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:42.697Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:42.697Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:42.697Z"],"workRunningCount":1}
[debug] [2023-09-01T16:18:42.697Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:18:42.699Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:18:42.699Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:18:42.699Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:18:42.699Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY"}}
[debug] [2023-09-01T16:18:42.700Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:42.700Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:42.701Z] [runtime-status] [14805] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media"},"context":{"eventId":"1693585122688","timestamp":"2023-09-01T16:18:42.688Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585122660\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:18:42.660Z\",\"updated\":\"2023-09-01T16:18:42.660Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"iVJ9EB+EZsdFXj35xARbJm6RPN8\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"4ca13f97-a547-44d0-b4fd-773c618520a7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:18:42.660Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media\"},\"context\":{\"eventId\":\"1693585122688\",\"timestamp\":\"2023-09-01T16:18:42.688Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585122660\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:18:42.660Z\",\"updated\":\"2023-09-01T16:18:42.660Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"iVJ9EB+EZsdFXj35xARbJm6RPN8\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"4ca13f97-a547-44d0-b4fd-773c618520a7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:18:42.660Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const filePath:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:18:42.703Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 3.554917ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 3.554917ms"}}
[debug] [2023-09-01T16:18:42.703Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE"}}
[debug] [2023-09-01T16:18:42.703Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:18:42.703Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:18:42.703Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:47.198Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:47.198Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585127197","timestamp":"2023-09-01T16:18:47.197Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media"}}
[debug] [2023-09-01T16:18:47.201Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:47.201Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:47.202Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:47.202Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"35d65db0-53ce-4631-995c-32dff06cb4f8","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:18:42.660Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585122660","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:18:42.660Z","updated":"2023-09-01T16:18:42.660Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"iVJ9EB+EZsdFXj35xARbJm6RPN8","metadata":{"firebaseStorageDownloadTokens":"4ca13f97-a547-44d0-b4fd-773c618520a7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:42.660Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585122660","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585122660&alt=media"}}
[debug] [2023-09-01T16:18:47.209Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:47.209Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:51.552Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:51.552Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585131552","timestamp":"2023-09-01T16:18:51.552Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media"}}
[debug] [2023-09-01T16:18:51.556Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:51.556Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:51.556Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:51.556Z"],"workRunningCount":1}
[debug] [2023-09-01T16:18:51.556Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:51.557Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:51.557Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:51.557Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:18:51.557Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"28aeb6b7-a801-4580-8b4d-df54e120cf67","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:18:51.531Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media"}}
[debug] [2023-09-01T16:18:51.558Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:51.558Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:18:51.558Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:18:51.558Z"],"workRunningCount":1}
[debug] [2023-09-01T16:18:51.558Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:18:51.559Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:18:51.559Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:18:51.560Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:18:51.560Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY"}}
[debug] [2023-09-01T16:18:51.560Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:18:51.560Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:18:51.562Z] [runtime-status] [14805] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media"},"context":{"eventId":"1693585131552","timestamp":"2023-09-01T16:18:51.552Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585131531\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:18:51.531Z\",\"updated\":\"2023-09-01T16:18:51.531Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lGJaVfYOhr1iGd2FzVpDOxiymLU\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"3726acaf-290c-4f04-9469-296263410575\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:18:51.531Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media\"},\"context\":{\"eventId\":\"1693585131552\",\"timestamp\":\"2023-09-01T16:18:51.552Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585131531\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:18:51.531Z\",\"updated\":\"2023-09-01T16:18:51.531Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lGJaVfYOhr1iGd2FzVpDOxiymLU\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"3726acaf-290c-4f04-9469-296263410575\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:18:51.531Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const filePath:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:18:51.563Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 3.086708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 3.086708ms"}}
[debug] [2023-09-01T16:18:51.563Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE"}}
[debug] [2023-09-01T16:18:51.563Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:18:51.563Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:18:51.563Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:21:09.016Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:21:09.016Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585269016","timestamp":"2023-09-01T16:21:09.016Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media"}}
[debug] [2023-09-01T16:21:09.022Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:21:09.022Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:21:09.023Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:21:09.023Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"f12b8052-bd91-447d-ba65-f76dc935aeb2","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:18:51.531Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585131531","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:18:51.531Z","updated":"2023-09-01T16:18:51.531Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lGJaVfYOhr1iGd2FzVpDOxiymLU","metadata":{"firebaseStorageDownloadTokens":"3726acaf-290c-4f04-9469-296263410575"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:18:51.531Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585131531","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585131531&alt=media"}}
[debug] [2023-09-01T16:21:09.026Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:21:09.026Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:21:12.914Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:21:12.914Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585272914","timestamp":"2023-09-01T16:21:12.914Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media"}}
[debug] [2023-09-01T16:21:12.915Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:21:12.915Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:21:12.916Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:21:12.915Z"],"workRunningCount":1}
[debug] [2023-09-01T16:21:12.916Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:21:12.917Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:21:12.917Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:21:12.917Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:21:12.917Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"8d9a4a68-5b90-43ce-8bbc-3b3152a67422","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:21:12.888Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media"}}
[debug] [2023-09-01T16:21:12.919Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:21:12.919Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:21:12.919Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:21:12.919Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:21:12.919Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:21:12.919Z"],"workRunningCount":1}
[debug] [2023-09-01T16:21:12.919Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:21:12.920Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:21:12.920Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:21:12.921Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:21:12.921Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: BUSY"}}
[debug] [2023-09-01T16:21:12.924Z] [runtime-status] [14805] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media"},"context":{"eventId":"1693585272914","timestamp":"2023-09-01T16:21:12.914Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [14805] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585272888\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:21:12.888Z\",\"updated\":\"2023-09-01T16:21:12.888Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"zxxBR2oG6rKK56ckoHF2pZ2G8qw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"4d80298c-dd29-4dce-9a41-64d85f94fa24\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:21:12.888Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media\"},\"context\":{\"eventId\":\"1693585272914\",\"timestamp\":\"2023-09-01T16:21:12.914Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585272888\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:21:12.888Z\",\"updated\":\"2023-09-01T16:21:12.888Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"zxxBR2oG6rKK56ckoHF2pZ2G8qw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"4d80298c-dd29-4dce-9a41-64d85f94fa24\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:21:12.888Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const filePath:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const filePath:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:21:12.925Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 4.500459ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 4.500459ms"}}
[debug] [2023-09-01T16:21:12.925Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: IDLE"}}
[debug] [2023-09-01T16:21:12.925Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:21:12.925Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:21:12.926Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:23:20.943Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:23:21.944Z] Validating nodejs source
[debug] [2023-09-01T16:23:22.447Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:23:22.447Z] Building nodejs source
[debug] [2023-09-01T16:23:22.448Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:23:22.448Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:23:22.449Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8613

[debug] [2023-09-01T16:23:22.618Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:23:27.629Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:23:27.629Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: FINISHING"}}
[debug] [2023-09-01T16:23:27.632Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: exited"}}
[debug] [2023-09-01T16:23:27.632Z] [worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e3feaba2-d8c5-4c4a-9f93-86e05a8897b5]: FINISHED"}}
[debug] [2023-09-01T16:23:39.057Z] Sep 01, 2023 9:23:39 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:23:39 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-09-01T16:23:45.018Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:23:45.018Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585425017","timestamp":"2023-09-01T16:23:45.017Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media"}}
[debug] [2023-09-01T16:23:45.020Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:23:45.020Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:23:45.020Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:23:45.020Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"32b83a7f-eae2-48b8-a937-8ea14b115434","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:21:12.888Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585272888","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:21:12.888Z","updated":"2023-09-01T16:21:12.888Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"zxxBR2oG6rKK56ckoHF2pZ2G8qw","metadata":{"firebaseStorageDownloadTokens":"4d80298c-dd29-4dce-9a41-64d85f94fa24"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:21:12.888Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585272888","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585272888&alt=media"}}
[debug] [2023-09-01T16:23:45.022Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:23:45.022Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:23:49.837Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:23:49.837Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585429837","timestamp":"2023-09-01T16:23:49.837Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media"}}
[debug] [2023-09-01T16:23:49.838Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:23:49.838Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:23:49.839Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:23:49.838Z"],"workRunningCount":1}
[debug] [2023-09-01T16:23:49.841Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:23:49.841Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:23:49.841Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:23:49.841Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:23:49.841Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"6eede424-9808-40d3-9173-cd77bb7b3c7f","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:23:49.811Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media"}}
[debug] [2023-09-01T16:23:49.843Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:23:49.843Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:23:49.843Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:23:49.843Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:23:49.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:23:49.843Z"],"workRunningCount":1}
[debug] [2023-09-01T16:23:49.844Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:23:49.845Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:23:49.845Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:23:49.845Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:23:49.846Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:23:49.847Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:23:50.161Z] [runtime-status] [15089] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:23:50.162Z] [runtime-status] [15089] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:23:50.162Z] [runtime-status] [15089] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:23:50.162Z] [runtime-status] [15089] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:23:50.229Z] [runtime-status] [15089] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:23:50.229Z] [runtime-status] [15089] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:23:50.229Z] [runtime-status] [15089] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:23:50.229Z] [runtime-status] [15089] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:23:50.230Z] [runtime-status] [15089] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:23:50.230Z] [runtime-status] [15089] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:23:50.231Z] [runtime-status] [15089] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:23:50.251Z] [runtime-status] [15089] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:23:50.252Z] [runtime-status] [15089] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_76df91d2693cdf52.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_76df91d2693cdf52.sock"}}
[debug] [2023-09-01T16:23:50.254Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: IDLE"}}
[debug] [2023-09-01T16:23:50.254Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:23:50.254Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: BUSY"}}
[debug] [2023-09-01T16:23:50.258Z] [runtime-status] [15089] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media"},"context":{"eventId":"1693585429837","timestamp":"2023-09-01T16:23:49.837Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15089] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585429811\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:23:49.811Z\",\"updated\":\"2023-09-01T16:23:49.811Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"Jdx3cT8a9B1h7A9zjvZcWNhoEik\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"34ef3550-9f4e-4069-ad34-a2d3701e7513\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:23:49.811Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media\"},\"context\":{\"eventId\":\"1693585429837\",\"timestamp\":\"2023-09-01T16:23:49.837Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585429811\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:23:49.811Z\",\"updated\":\"2023-09-01T16:23:49.811Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"Jdx3cT8a9B1h7A9zjvZcWNhoEik\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"34ef3550-9f4e-4069-ad34-a2d3701e7513\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:23:49.811Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const filePath TEST:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const filePath TEST:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const filePath TEST:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:23:50.260Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 5.689333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 5.689333ms"}}
[debug] [2023-09-01T16:23:50.260Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: IDLE"}}
[debug] [2023-09-01T16:23:50.260Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:23:50.260Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:23:50.260Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:24:34.773Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:24:35.774Z] Validating nodejs source
[debug] [2023-09-01T16:24:36.371Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:24:36.371Z] Building nodejs source
[debug] [2023-09-01T16:24:36.371Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:24:36.372Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:24:36.372Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8004

[debug] [2023-09-01T16:24:36.543Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:24:41.059Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:24:41.060Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585481055","timestamp":"2023-09-01T16:24:41.055Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media"}}
[debug] [2023-09-01T16:24:41.068Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:24:41.069Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:24:41.069Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:24:41.069Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c2f0e766-319c-433e-bdcb-c8a1b8d750a0","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:23:49.811Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585429811","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:23:49.811Z","updated":"2023-09-01T16:23:49.811Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Jdx3cT8a9B1h7A9zjvZcWNhoEik","metadata":{"firebaseStorageDownloadTokens":"34ef3550-9f4e-4069-ad34-a2d3701e7513"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:23:49.811Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585429811","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585429811&alt=media"}}
[debug] [2023-09-01T16:24:41.072Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:24:41.073Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:24:41.571Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:24:41.571Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: FINISHING"}}
[debug] [2023-09-01T16:24:41.577Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: exited"}}
[debug] [2023-09-01T16:24:41.577Z] [worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1c15bbf0-db6b-4c03-9e64-1cac7ec9bb82]: FINISHED"}}
[debug] [2023-09-01T16:24:46.951Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:24:46.951Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585486951","timestamp":"2023-09-01T16:24:46.951Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media"}}
[debug] [2023-09-01T16:24:46.954Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:24:46.954Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:24:46.954Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:24:46.954Z"],"workRunningCount":1}
[debug] [2023-09-01T16:24:46.954Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:24:46.955Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:24:46.955Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:24:46.955Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:24:46.955Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"2402f6e2-20ba-4cef-b54d-27a220ccdad4","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:24:46.920Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media"}}
[debug] [2023-09-01T16:24:46.957Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:24:46.957Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:24:46.957Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:24:46.957Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:24:46.957Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:24:46.957Z"],"workRunningCount":1}
[debug] [2023-09-01T16:24:46.957Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:24:46.959Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:24:46.959Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:24:46.959Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:24:46.960Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:24:46.960Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:24:47.269Z] [runtime-status] [15126] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:24:47.270Z] [runtime-status] [15126] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:24:47.270Z] [runtime-status] [15126] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:24:47.270Z] [runtime-status] [15126] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:24:47.338Z] [runtime-status] [15126] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:24:47.339Z] [runtime-status] [15126] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:24:47.339Z] [runtime-status] [15126] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:24:47.339Z] [runtime-status] [15126] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:24:47.340Z] [runtime-status] [15126] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:24:47.340Z] [runtime-status] [15126] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:24:47.341Z] [runtime-status] [15126] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:24:47.361Z] [runtime-status] [15126] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:24:47.361Z] [runtime-status] [15126] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_b7dd0b79163ec363.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_b7dd0b79163ec363.sock"}}
[debug] [2023-09-01T16:24:47.366Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE"}}
[debug] [2023-09-01T16:24:47.366Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:24:47.366Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: BUSY"}}
[debug] [2023-09-01T16:24:47.370Z] [runtime-status] [15126] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media"},"context":{"eventId":"1693585486951","timestamp":"2023-09-01T16:24:46.951Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585486920\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:24:46.920Z\",\"updated\":\"2023-09-01T16:24:46.920Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"TW8BunplJAqTcJqmsZk6WjZJJ28\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:24:46.920Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media\"},\"context\":{\"eventId\":\"1693585486951\",\"timestamp\":\"2023-09-01T16:24:46.951Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585486920\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:24:46.920Z\",\"updated\":\"2023-09-01T16:24:46.920Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"TW8BunplJAqTcJqmsZk6WjZJJ28\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:24:46.920Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:24:47.372Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 5.842167ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 5.842167ms"}}
[debug] [2023-09-01T16:24:47.372Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE"}}
[debug] [2023-09-01T16:24:47.372Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:24:47.372Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:24:47.372Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:06.564Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:06.565Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585506564","timestamp":"2023-09-01T16:25:06.564Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media"}}
[debug] [2023-09-01T16:25:06.570Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:06.570Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:06.570Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:06.571Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"2aef0c35-8d92-40ba-9367-0649d0ccb50f","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:24:46.920Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585486920","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:24:46.920Z","updated":"2023-09-01T16:24:46.920Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"TW8BunplJAqTcJqmsZk6WjZJJ28","metadata":{"firebaseStorageDownloadTokens":"63cfb8f9-0aaa-44c2-8fc7-d5bb2ecefda7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:24:46.920Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585486920","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585486920&alt=media"}}
[debug] [2023-09-01T16:25:06.573Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:06.573Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:11.197Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:11.197Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585511197","timestamp":"2023-09-01T16:25:11.197Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media"}}
[debug] [2023-09-01T16:25:11.201Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:11.201Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:11.201Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:11.201Z"],"workRunningCount":1}
[debug] [2023-09-01T16:25:11.201Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:11.202Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:11.202Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:11.202Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:11.203Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"5f916e53-88e6-4fca-beb1-dba1f10ee20d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:25:11.171Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media"}}
[debug] [2023-09-01T16:25:11.204Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:11.204Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:11.204Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:11.204Z"],"workRunningCount":1}
[debug] [2023-09-01T16:25:11.204Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:25:11.206Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:25:11.206Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:25:11.206Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:25:11.206Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: BUSY"}}
[debug] [2023-09-01T16:25:11.207Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:11.208Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:11.210Z] [runtime-status] [15126] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media"},"context":{"eventId":"1693585511197","timestamp":"2023-09-01T16:25:11.197Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15126] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585511171\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:25:11.171Z\",\"updated\":\"2023-09-01T16:25:11.171Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"9ZOzlCus1malbnXcUi0njV907xQ\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"dfa51d07-18c2-4b57-8259-39d7aa016975\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:25:11.171Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media\"},\"context\":{\"eventId\":\"1693585511197\",\"timestamp\":\"2023-09-01T16:25:11.197Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585511171\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:25:11.171Z\",\"updated\":\"2023-09-01T16:25:11.171Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"9ZOzlCus1malbnXcUi0njV907xQ\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"dfa51d07-18c2-4b57-8259-39d7aa016975\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:25:11.171Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const tempFilePath:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:25:11.211Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 4.309208ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 4.309208ms"}}
[debug] [2023-09-01T16:25:11.211Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: IDLE"}}
[debug] [2023-09-01T16:25:11.211Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:25:11.211Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:25:11.211Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:43.061Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:25:44.063Z] Validating nodejs source
[debug] [2023-09-01T16:25:44.547Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:25:44.547Z] Building nodejs source
[debug] [2023-09-01T16:25:44.547Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:25:44.548Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:25:44.549Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8765

[debug] [2023-09-01T16:25:44.724Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:25:45.986Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:45.986Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585545985","timestamp":"2023-09-01T16:25:45.985Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media"}}
[debug] [2023-09-01T16:25:45.995Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:45.995Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:45.995Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:45.995Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e8334f11-e2b2-4526-91fe-059525fcae28","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:25:11.171Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585511171","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:25:11.171Z","updated":"2023-09-01T16:25:11.171Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"9ZOzlCus1malbnXcUi0njV907xQ","metadata":{"firebaseStorageDownloadTokens":"dfa51d07-18c2-4b57-8259-39d7aa016975"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:11.171Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585511171","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585511171&alt=media"}}
[debug] [2023-09-01T16:25:45.999Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:45.999Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:25:49.732Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:25:49.732Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: FINISHING"}}
[debug] [2023-09-01T16:25:49.733Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: exited"}}
[debug] [2023-09-01T16:25:49.734Z] [worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-48067d2b-f6e9-4911-8ad0-83a69d5aa25f]: FINISHED"}}
[debug] [2023-09-01T16:25:51.078Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:51.078Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585551078","timestamp":"2023-09-01T16:25:51.078Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media"}}
[debug] [2023-09-01T16:25:51.083Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:51.083Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:51.083Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:51.083Z"],"workRunningCount":1}
[debug] [2023-09-01T16:25:51.083Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:51.084Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:51.084Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:51.084Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:25:51.084Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"56cc3ccb-6849-4772-805d-bf29e5719f5b","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:25:51.040Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media"}}
[debug] [2023-09-01T16:25:51.085Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:25:51.085Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:25:51.086Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:51.085Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:25:51.086Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:25:51.085Z"],"workRunningCount":1}
[debug] [2023-09-01T16:25:51.086Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:25:51.089Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:25:51.089Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:25:51.089Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:25:51.090Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:25:51.090Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:25:51.390Z] [runtime-status] [15169] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:25:51.390Z] [runtime-status] [15169] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:25:51.390Z] [runtime-status] [15169] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:25:51.390Z] [runtime-status] [15169] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:25:51.457Z] [runtime-status] [15169] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:25:51.457Z] [runtime-status] [15169] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:25:51.457Z] [runtime-status] [15169] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:25:51.457Z] [runtime-status] [15169] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:25:51.458Z] [runtime-status] [15169] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:25:51.458Z] [runtime-status] [15169] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:25:51.459Z] [runtime-status] [15169] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:25:51.480Z] [runtime-status] [15169] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:25:51.480Z] [runtime-status] [15169] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_af24d04c0b050815.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_af24d04c0b050815.sock"}}
[debug] [2023-09-01T16:25:51.498Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE"}}
[debug] [2023-09-01T16:25:51.498Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:25:51.498Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY"}}
[debug] [2023-09-01T16:25:51.502Z] [runtime-status] [15169] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media"},"context":{"eventId":"1693585551078","timestamp":"2023-09-01T16:25:51.078Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585551040\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:25:51.040Z\",\"updated\":\"2023-09-01T16:25:51.040Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"gPA3O3we/xVWSDo2gDbpmazhV30\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:25:51.040Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media\"},\"context\":{\"eventId\":\"1693585551078\",\"timestamp\":\"2023-09-01T16:25:51.078Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585551040\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:25:51.040Z\",\"updated\":\"2023-09-01T16:25:51.040Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"gPA3O3we/xVWSDo2gDbpmazhV30\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:25:51.040Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const fileName:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const fileName:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const fileName:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:25:51.504Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 5.89975ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 5.89975ms"}}
[debug] [2023-09-01T16:25:51.504Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE"}}
[debug] [2023-09-01T16:25:51.504Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:25:51.504Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:25:51.504Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:26:18.794Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:18.795Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585578794","timestamp":"2023-09-01T16:26:18.794Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"},"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media"}}
[debug] [2023-09-01T16:26:18.805Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:26:18.805Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:26:18.805Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:26:18.805Z"],"workRunningCount":1}
[debug] [2023-09-01T16:26:18.806Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:26:18.807Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:18.807Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:26:18.807Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:18.807Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"63984a77-b51a-4b1e-a4b4-a64d53525072","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","time":"2023-09-01T16:26:18.794Z","data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media"}}
[debug] [2023-09-01T16:26:18.813Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:18.813Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:26:18.813Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:26:18.813Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:26:18.813Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:26:18.813Z"],"workRunningCount":1}
[debug] [2023-09-01T16:26:18.814Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:26:18.818Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:26:18.818Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:26:18.819Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:26:18.819Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY"}}
[debug] [2023-09-01T16:26:18.824Z] [runtime-status] [15169] RunBackground {"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media"},"context":{"eventId":"1693585578794","timestamp":"2023-09-01T16:26:18.794Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"univision.webp\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585578794\",\"metageneration\":\"1\",\"contentType\":\"image/webp\",\"timeCreated\":\"2023-09-01T16:26:18.794Z\",\"updated\":\"2023-09-01T16:26:18.794Z\",\"storageClass\":\"STANDARD\",\"size\":\"2338\",\"md5Hash\":\"MJiXVCLGFzhze0z2Kc1ksQ==\",\"etag\":\"m2j+VoYXHweFvlp5KmyTUKvlpGc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"7a758b13-c5b4-4b4a-976e-e98580d0beda\"},\"crc32c\":\"59RijA==\",\"timeStorageClassUpdated\":\"2023-09-01T16:26:18.794Z\",\"id\":\"misinfo-5d004.appspot.com/univision.webp/1693585578794\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media\"},\"context\":{\"eventId\":\"1693585578794\",\"timestamp\":\"2023-09-01T16:26:18.794Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"univision.webp\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585578794\",\"metageneration\":\"1\",\"contentType\":\"image/webp\",\"timeCreated\":\"2023-09-01T16:26:18.794Z\",\"updated\":\"2023-09-01T16:26:18.794Z\",\"storageClass\":\"STANDARD\",\"size\":\"2338\",\"md5Hash\":\"MJiXVCLGFzhze0z2Kc1ksQ==\",\"etag\":\"m2j+VoYXHweFvlp5KmyTUKvlpGc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"7a758b13-c5b4-4b4a-976e-e98580d0beda\"},\"crc32c\":\"59RijA==\",\"timeStorageClassUpdated\":\"2023-09-01T16:26:18.794Z\",\"id\":\"misinfo-5d004.appspot.com/univision.webp/1693585578794\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const fileName:  univision.webp"} {"user":{"severity":"INFO","message":"const fileName:  univision.webp"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const fileName:  univision.webp\"}"}}
[info] >  {"severity":"INFO","message":"File is not in HEIC format. Skipping conversion."} {"user":{"severity":"INFO","message":"File is not in HEIC format. Skipping conversion."},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"File is not in HEIC format. Skipping conversion.\"}"}}
[debug] [2023-09-01T16:26:18.825Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 6.260875ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 6.260875ms"}}
[debug] [2023-09-01T16:26:18.825Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE"}}
[debug] [2023-09-01T16:26:18.825Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:26:18.825Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:26:18.825Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:26:26.665Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:26.665Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585586664","timestamp":"2023-09-01T16:26:26.664Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media"}}
[debug] [2023-09-01T16:26:26.669Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:26.669Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585586669","timestamp":"2023-09-01T16:26:26.669Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"},"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","contentDisposition":"inline","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media"}}
[debug] [2023-09-01T16:26:26.678Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:26.678Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:26:26.678Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:26.678Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"0a11edd7-82c0-487a-ae44-386816f01e68","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:25:51.040Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585551040","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:25:51.040Z","updated":"2023-09-01T16:25:51.040Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"gPA3O3we/xVWSDo2gDbpmazhV30","metadata":{"firebaseStorageDownloadTokens":"82957a82-824f-4e6d-9e74-5ec0ba6ca8f3"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:25:51.040Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585551040","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585551040&alt=media"}}
[debug] [2023-09-01T16:26:26.683Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:26.683Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:26:26.683Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:26:26.683Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"b39a4401-ca08-446c-be15-dfa931f3ba0f","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","time":"2023-09-01T16:26:18.794Z","data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693585578794","metageneration":"1","contentType":"image/webp","contentDisposition":"inline","timeCreated":"2023-09-01T16:26:18.794Z","updated":"2023-09-01T16:26:18.794Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"m2j+VoYXHweFvlp5KmyTUKvlpGc","metadata":{"firebaseStorageDownloadTokens":"7a758b13-c5b4-4b4a-976e-e98580d0beda"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T16:26:18.794Z","id":"misinfo-5d004.appspot.com/univision.webp/1693585578794","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693585578794&alt=media"}}
[debug] [2023-09-01T16:26:26.684Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:26.684Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:26:26.685Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:26:26.685Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:01.015Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:27:02.017Z] Validating nodejs source
[debug] [2023-09-01T16:27:02.489Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:27:02.489Z] Building nodejs source
[debug] [2023-09-01T16:27:02.489Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:27:02.490Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:27:02.490Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8593

[debug] [2023-09-01T16:27:02.677Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:27:07.553Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:07.553Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585627553","timestamp":"2023-09-01T16:27:07.553Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media"}}
[debug] [2023-09-01T16:27:07.554Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:07.554Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:07.554Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:07.554Z"],"workRunningCount":1}
[debug] [2023-09-01T16:27:07.554Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:07.555Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:07.555Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:07.555Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:07.555Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c12afb0e-f58b-47ef-882e-88346c24c09b","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:27:07.525Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media"}}
[debug] [2023-09-01T16:27:07.555Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:07.555Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:07.555Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:07.555Z"],"workRunningCount":1}
[debug] [2023-09-01T16:27:07.555Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:27:07.556Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:27:07.557Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:27:07.557Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:27:07.557Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: BUSY"}}
[debug] [2023-09-01T16:27:07.557Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:07.557Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:07.559Z] [runtime-status] [15169] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media"},"context":{"eventId":"1693585627553","timestamp":"2023-09-01T16:27:07.553Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15169] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585627525\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:27:07.525Z\",\"updated\":\"2023-09-01T16:27:07.525Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"duNLY41ty+pTCKA0j5eNJAT/CcU\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"c73c583b-049c-4ddb-9683-c64ffa7767d7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:27:07.525Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media\"},\"context\":{\"eventId\":\"1693585627553\",\"timestamp\":\"2023-09-01T16:27:07.553Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585627525\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:27:07.525Z\",\"updated\":\"2023-09-01T16:27:07.525Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"duNLY41ty+pTCKA0j5eNJAT/CcU\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"c73c583b-049c-4ddb-9683-c64ffa7767d7\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:27:07.525Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const fileName:  IMG_0686.HEIC"} {"user":{"severity":"INFO","message":"const fileName:  IMG_0686.HEIC"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const fileName:  IMG_0686.HEIC\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:27:07.559Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 2.591083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 2.591083ms"}}
[debug] [2023-09-01T16:27:07.559Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: IDLE"}}
[debug] [2023-09-01T16:27:07.560Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:27:07.560Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:27:07.560Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:27:07.686Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:27:07.686Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: FINISHING"}}
[debug] [2023-09-01T16:27:07.688Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: exited"}}
[debug] [2023-09-01T16:27:07.688Z] [worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3be40bf6-e0ef-4d89-a26c-9cefd7a131c5]: FINISHED"}}
[debug] [2023-09-01T16:27:40.771Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:40.773Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585660771","timestamp":"2023-09-01T16:27:40.771Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media"}}
[debug] [2023-09-01T16:27:40.780Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:40.780Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:40.780Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:40.780Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e6ba8120-1cab-4259-8247-fba5636422cb","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:27:07.525Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585627525","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:27:07.525Z","updated":"2023-09-01T16:27:07.525Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"duNLY41ty+pTCKA0j5eNJAT/CcU","metadata":{"firebaseStorageDownloadTokens":"c73c583b-049c-4ddb-9683-c64ffa7767d7"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:07.525Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585627525","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585627525&alt=media"}}
[debug] [2023-09-01T16:27:40.786Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:40.786Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:45.000Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:45.000Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585665000","timestamp":"2023-09-01T16:27:45.000Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media"}}
[debug] [2023-09-01T16:27:45.006Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:45.006Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:45.006Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:45.006Z"],"workRunningCount":1}
[debug] [2023-09-01T16:27:45.006Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:45.007Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:45.007Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:45.007Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:27:45.007Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"9232cbbe-ca18-4b49-b340-491dc3fa8c1f","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:27:44.970Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media"}}
[debug] [2023-09-01T16:27:45.008Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:27:45.008Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:27:45.008Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:45.008Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:27:45.008Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:27:45.008Z"],"workRunningCount":1}
[debug] [2023-09-01T16:27:45.008Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:27:45.010Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:27:45.010Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:27:45.010Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:27:45.011Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:27:45.011Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:27:45.323Z] [runtime-status] [15260] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:27:45.324Z] [runtime-status] [15260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:27:45.325Z] [runtime-status] [15260] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:27:45.325Z] [runtime-status] [15260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:27:45.391Z] [runtime-status] [15260] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:27:45.391Z] [runtime-status] [15260] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:27:45.392Z] [runtime-status] [15260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:27:45.392Z] [runtime-status] [15260] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:27:45.393Z] [runtime-status] [15260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:27:45.393Z] [runtime-status] [15260] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:27:45.394Z] [runtime-status] [15260] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:27:45.414Z] [runtime-status] [15260] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:27:45.414Z] [runtime-status] [15260] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ff7ad4e564fcb00f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ff7ad4e564fcb00f.sock"}}
[debug] [2023-09-01T16:27:45.417Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: IDLE"}}
[debug] [2023-09-01T16:27:45.417Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:27:45.417Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: BUSY"}}
[debug] [2023-09-01T16:27:45.421Z] [runtime-status] [15260] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media"},"context":{"eventId":"1693585665000","timestamp":"2023-09-01T16:27:45.000Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15260] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585664970\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:27:44.970Z\",\"updated\":\"2023-09-01T16:27:44.970Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"IPn1WctJCkFg+8U0Se93GNt/5IA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"888963c4-b571-4de1-80a2-050918e76bf0\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:27:44.970Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media\"},\"context\":{\"eventId\":\"1693585665000\",\"timestamp\":\"2023-09-01T16:27:45.000Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585664970\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:27:44.970Z\",\"updated\":\"2023-09-01T16:27:44.970Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"IPn1WctJCkFg+8U0Se93GNt/5IA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"888963c4-b571-4de1-80a2-050918e76bf0\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:27:44.970Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"const bucket:  Bucket {\n  _events: [Object: null prototype] {},\n  _eventsCount: 0,\n  _maxListeners: undefined,\n  metadata: {},\n  baseUrl: '/b',\n  parent: Storage {\n    baseUrl: 'http://127.0.0.1:9199',\n    apiEndpoint: 'http://127.0.0.1:9199',\n    timeout: undefined,\n    globalInterceptors: [],\n    interceptors: [],\n    packageJson: {\n      name: '@google-cloud/storage',\n      description: 'Cloud Storage Client Library for Node.js',\n      version: '6.12.0',\n      license: 'Apache-2.0',\n      author: 'Google Inc.',\n      engines: [Object],\n      repository: 'googleapis/nodejs-storage',\n      main: './build/src/index.js',\n      types: './build/src/index.d.ts',\n      files: [Array],\n      keywords: [Array],\n      scripts: [Object],\n      dependencies: [Object],\n      devDependencies: [Object]\n    },\n    projectId: '{{projectId}}',\n    projectIdRequired: false,\n    providedUserAgent: undefined,\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\n      getCredentials: [Function: bound getCredentials],\n      authClient: [GoogleAuth]\n    },\n    authClient: GoogleAuth {\n      checkIsGCE: undefined,\n      jsonContent: null,\n      cachedCredential: null,\n      _cachedProjectId: null,\n      keyFilename: undefined,\n      scopes: [Array],\n      clientOptions: undefined\n    },\n    getCredentials: [Function: bound getCredentials],\n    acl: {\n      OWNER_ROLE: 'OWNER',\n      READER_ROLE: 'READER',\n      WRITER_ROLE: 'WRITER'\n    },\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n    retryOptions: {\n      autoRetry: true,\n      maxRetries: 3,\n      retryDelayMultiplier: 2,\n      totalTimeout: 600,\n      maxRetryDelay: 64,\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\n      idempotencyStrategy: 1\n    },\n    getBucketsStream: [Function (anonymous)],\n    getHmacKeysStream: [Function (anonymous)]\n  },\n  id: 'misinfo-5d004.appspot.com',\n  createMethod: [Function: bound wrapper],\n  methods: {\n    create: { reqOpts: [Object] },\n    delete: { reqOpts: [Object] },\n    exists: { reqOpts: [Object] },\n    get: { reqOpts: [Object] },\n    getMetadata: { reqOpts: [Object] },\n    setMetadata: { reqOpts: [Object] }\n  },\n  interceptors: [],\n  projectId: undefined,\n  name: 'misinfo-5d004.appspot.com',\n  storage: Storage {\n    baseUrl: 'http://127.0.0.1:9199',\n    apiEndpoint: 'http://127.0.0.1:9199',\n    timeout: undefined,\n    globalInterceptors: [],\n    interceptors: [],\n    packageJson: {\n      name: '@google-cloud/storage',\n      description: 'Cloud Storage Client Library for Node.js',\n      version: '6.12.0',\n      license: 'Apache-2.0',\n      author: 'Google Inc.',\n      engines: [Object],\n      repository: 'googleapis/nodejs-storage',\n      main: './build/src/index.js',\n      types: './build/src/index.d.ts',\n      files: [Array],\n      keywords: [Array],\n      scripts: [Object],\n      dependencies: [Object],\n      devDependencies: [Object]\n    },\n    projectId: '{{projectId}}',\n    projectIdRequired: false,\n    providedUserAgent: undefined,\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\n      getCredentials: [Function: bound getCredentials],\n      authClient: [GoogleAuth]\n    },\n    authClient: GoogleAuth {\n      checkIsGCE: undefined,\n      jsonContent: null,\n      cachedCredential: null,\n      _cachedProjectId: null,\n      keyFilename: undefined,\n      scopes: [Array],\n      clientOptions: undefined\n    },\n    getCredentials: [Function: bound getCredentials],\n    acl: {\n      OWNER_ROLE: 'OWNER',\n      READER_ROLE: 'READER',\n      WRITER_ROLE: 'WRITER'\n    },\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n    retryOptions: {\n      autoRetry: true,\n      maxRetries: 3,\n      retryDelayMultiplier: 2,\n      totalTimeout: 600,\n      maxRetryDelay: 64,\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\n      idempotencyStrategy: 1\n    },\n    getBucketsStream: [Function (anonymous)],\n    getHmacKeysStream: [Function (anonymous)]\n  },\n  userProject: undefined,\n  acl: Acl {\n    owners: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    readers: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    writers: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    pathPrefix: '/acl',\n    request_: [Function: bound request],\n    default: Acl {\n      owners: [Object],\n      readers: [Object],\n      writers: [Object],\n      pathPrefix: '/defaultObjectAcl',\n      request_: [Function: bound request]\n    }\n  },\n  crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n  iam: Iam {\n    request_: [Function: bound request],\n    resourceId_: 'buckets/[object Promise]'\n  },\n  getFilesStream: [Function (anonymous)],\n  instanceRetryValue: true,\n  instancePreconditionOpts: undefined,\n  [Symbol(kCapture)]: false\n}"} {"user":{"severity":"INFO","message":"const bucket:  Bucket {\n  _events: [Object: null prototype] {},\n  _eventsCount: 0,\n  _maxListeners: undefined,\n  metadata: {},\n  baseUrl: '/b',\n  parent: Storage {\n    baseUrl: 'http://127.0.0.1:9199',\n    apiEndpoint: 'http://127.0.0.1:9199',\n    timeout: undefined,\n    globalInterceptors: [],\n    interceptors: [],\n    packageJson: {\n      name: '@google-cloud/storage',\n      description: 'Cloud Storage Client Library for Node.js',\n      version: '6.12.0',\n      license: 'Apache-2.0',\n      author: 'Google Inc.',\n      engines: [Object],\n      repository: 'googleapis/nodejs-storage',\n      main: './build/src/index.js',\n      types: './build/src/index.d.ts',\n      files: [Array],\n      keywords: [Array],\n      scripts: [Object],\n      dependencies: [Object],\n      devDependencies: [Object]\n    },\n    projectId: '{{projectId}}',\n    projectIdRequired: false,\n    providedUserAgent: undefined,\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\n      getCredentials: [Function: bound getCredentials],\n      authClient: [GoogleAuth]\n    },\n    authClient: GoogleAuth {\n      checkIsGCE: undefined,\n      jsonContent: null,\n      cachedCredential: null,\n      _cachedProjectId: null,\n      keyFilename: undefined,\n      scopes: [Array],\n      clientOptions: undefined\n    },\n    getCredentials: [Function: bound getCredentials],\n    acl: {\n      OWNER_ROLE: 'OWNER',\n      READER_ROLE: 'READER',\n      WRITER_ROLE: 'WRITER'\n    },\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n    retryOptions: {\n      autoRetry: true,\n      maxRetries: 3,\n      retryDelayMultiplier: 2,\n      totalTimeout: 600,\n      maxRetryDelay: 64,\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\n      idempotencyStrategy: 1\n    },\n    getBucketsStream: [Function (anonymous)],\n    getHmacKeysStream: [Function (anonymous)]\n  },\n  id: 'misinfo-5d004.appspot.com',\n  createMethod: [Function: bound wrapper],\n  methods: {\n    create: { reqOpts: [Object] },\n    delete: { reqOpts: [Object] },\n    exists: { reqOpts: [Object] },\n    get: { reqOpts: [Object] },\n    getMetadata: { reqOpts: [Object] },\n    setMetadata: { reqOpts: [Object] }\n  },\n  interceptors: [],\n  projectId: undefined,\n  name: 'misinfo-5d004.appspot.com',\n  storage: Storage {\n    baseUrl: 'http://127.0.0.1:9199',\n    apiEndpoint: 'http://127.0.0.1:9199',\n    timeout: undefined,\n    globalInterceptors: [],\n    interceptors: [],\n    packageJson: {\n      name: '@google-cloud/storage',\n      description: 'Cloud Storage Client Library for Node.js',\n      version: '6.12.0',\n      license: 'Apache-2.0',\n      author: 'Google Inc.',\n      engines: [Object],\n      repository: 'googleapis/nodejs-storage',\n      main: './build/src/index.js',\n      types: './build/src/index.d.ts',\n      files: [Array],\n      keywords: [Array],\n      scripts: [Object],\n      dependencies: [Object],\n      devDependencies: [Object]\n    },\n    projectId: '{{projectId}}',\n    projectIdRequired: false,\n    providedUserAgent: undefined,\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\n      getCredentials: [Function: bound getCredentials],\n      authClient: [GoogleAuth]\n    },\n    authClient: GoogleAuth {\n      checkIsGCE: undefined,\n      jsonContent: null,\n      cachedCredential: null,\n      _cachedProjectId: null,\n      keyFilename: undefined,\n      scopes: [Array],\n      clientOptions: undefined\n    },\n    getCredentials: [Function: bound getCredentials],\n    acl: {\n      OWNER_ROLE: 'OWNER',\n      READER_ROLE: 'READER',\n      WRITER_ROLE: 'WRITER'\n    },\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n    retryOptions: {\n      autoRetry: true,\n      maxRetries: 3,\n      retryDelayMultiplier: 2,\n      totalTimeout: 600,\n      maxRetryDelay: 64,\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\n      idempotencyStrategy: 1\n    },\n    getBucketsStream: [Function (anonymous)],\n    getHmacKeysStream: [Function (anonymous)]\n  },\n  userProject: undefined,\n  acl: Acl {\n    owners: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    readers: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    writers: {\n      addAllAuthenticatedUsers: [Function (anonymous)],\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\n      addAllUsers: [Function (anonymous)],\n      deleteAllUsers: [Function (anonymous)],\n      addDomain: [Function (anonymous)],\n      deleteDomain: [Function (anonymous)],\n      addGroup: [Function (anonymous)],\n      deleteGroup: [Function (anonymous)],\n      addProject: [Function (anonymous)],\n      deleteProject: [Function (anonymous)],\n      addUser: [Function (anonymous)],\n      deleteUser: [Function (anonymous)]\n    },\n    pathPrefix: '/acl',\n    request_: [Function: bound request],\n    default: Acl {\n      owners: [Object],\n      readers: [Object],\n      writers: [Object],\n      pathPrefix: '/defaultObjectAcl',\n      request_: [Function: bound request]\n    }\n  },\n  crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\n  iam: Iam {\n    request_: [Function: bound request],\n    resourceId_: 'buckets/[object Promise]'\n  },\n  getFilesStream: [Function (anonymous)],\n  instanceRetryValue: true,\n  instancePreconditionOpts: undefined,\n  [Symbol(kCapture)]: false\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"const bucket:  Bucket {\\n  _events: [Object: null prototype] {},\\n  _eventsCount: 0,\\n  _maxListeners: undefined,\\n  metadata: {},\\n  baseUrl: '/b',\\n  parent: Storage {\\n    baseUrl: 'http://127.0.0.1:9199',\\n    apiEndpoint: 'http://127.0.0.1:9199',\\n    timeout: undefined,\\n    globalInterceptors: [],\\n    interceptors: [],\\n    packageJson: {\\n      name: '@google-cloud/storage',\\n      description: 'Cloud Storage Client Library for Node.js',\\n      version: '6.12.0',\\n      license: 'Apache-2.0',\\n      author: 'Google Inc.',\\n      engines: [Object],\\n      repository: 'googleapis/nodejs-storage',\\n      main: './build/src/index.js',\\n      types: './build/src/index.d.ts',\\n      files: [Array],\\n      keywords: [Array],\\n      scripts: [Object],\\n      dependencies: [Object],\\n      devDependencies: [Object]\\n    },\\n    projectId: '{{projectId}}',\\n    projectIdRequired: false,\\n    providedUserAgent: undefined,\\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\\n      getCredentials: [Function: bound getCredentials],\\n      authClient: [GoogleAuth]\\n    },\\n    authClient: GoogleAuth {\\n      checkIsGCE: undefined,\\n      jsonContent: null,\\n      cachedCredential: null,\\n      _cachedProjectId: null,\\n      keyFilename: undefined,\\n      scopes: [Array],\\n      clientOptions: undefined\\n    },\\n    getCredentials: [Function: bound getCredentials],\\n    acl: {\\n      OWNER_ROLE: 'OWNER',\\n      READER_ROLE: 'READER',\\n      WRITER_ROLE: 'WRITER'\\n    },\\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\\n    retryOptions: {\\n      autoRetry: true,\\n      maxRetries: 3,\\n      retryDelayMultiplier: 2,\\n      totalTimeout: 600,\\n      maxRetryDelay: 64,\\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\\n      idempotencyStrategy: 1\\n    },\\n    getBucketsStream: [Function (anonymous)],\\n    getHmacKeysStream: [Function (anonymous)]\\n  },\\n  id: 'misinfo-5d004.appspot.com',\\n  createMethod: [Function: bound wrapper],\\n  methods: {\\n    create: { reqOpts: [Object] },\\n    delete: { reqOpts: [Object] },\\n    exists: { reqOpts: [Object] },\\n    get: { reqOpts: [Object] },\\n    getMetadata: { reqOpts: [Object] },\\n    setMetadata: { reqOpts: [Object] }\\n  },\\n  interceptors: [],\\n  projectId: undefined,\\n  name: 'misinfo-5d004.appspot.com',\\n  storage: Storage {\\n    baseUrl: 'http://127.0.0.1:9199',\\n    apiEndpoint: 'http://127.0.0.1:9199',\\n    timeout: undefined,\\n    globalInterceptors: [],\\n    interceptors: [],\\n    packageJson: {\\n      name: '@google-cloud/storage',\\n      description: 'Cloud Storage Client Library for Node.js',\\n      version: '6.12.0',\\n      license: 'Apache-2.0',\\n      author: 'Google Inc.',\\n      engines: [Object],\\n      repository: 'googleapis/nodejs-storage',\\n      main: './build/src/index.js',\\n      types: './build/src/index.d.ts',\\n      files: [Array],\\n      keywords: [Array],\\n      scripts: [Object],\\n      dependencies: [Object],\\n      devDependencies: [Object]\\n    },\\n    projectId: '{{projectId}}',\\n    projectIdRequired: false,\\n    providedUserAgent: undefined,\\n    makeAuthenticatedRequest: [Function: makeAuthenticatedRequest] {\\n      getCredentials: [Function: bound getCredentials],\\n      authClient: [GoogleAuth]\\n    },\\n    authClient: GoogleAuth {\\n      checkIsGCE: undefined,\\n      jsonContent: null,\\n      cachedCredential: null,\\n      _cachedProjectId: null,\\n      keyFilename: undefined,\\n      scopes: [Array],\\n      clientOptions: undefined\\n    },\\n    getCredentials: [Function: bound getCredentials],\\n    acl: {\\n      OWNER_ROLE: 'OWNER',\\n      READER_ROLE: 'READER',\\n      WRITER_ROLE: 'WRITER'\\n    },\\n    crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\\n    retryOptions: {\\n      autoRetry: true,\\n      maxRetries: 3,\\n      retryDelayMultiplier: 2,\\n      totalTimeout: 600,\\n      maxRetryDelay: 64,\\n      retryableErrorFn: [Function: RETRYABLE_ERR_FN_DEFAULT],\\n      idempotencyStrategy: 1\\n    },\\n    getBucketsStream: [Function (anonymous)],\\n    getHmacKeysStream: [Function (anonymous)]\\n  },\\n  userProject: undefined,\\n  acl: Acl {\\n    owners: {\\n      addAllAuthenticatedUsers: [Function (anonymous)],\\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\\n      addAllUsers: [Function (anonymous)],\\n      deleteAllUsers: [Function (anonymous)],\\n      addDomain: [Function (anonymous)],\\n      deleteDomain: [Function (anonymous)],\\n      addGroup: [Function (anonymous)],\\n      deleteGroup: [Function (anonymous)],\\n      addProject: [Function (anonymous)],\\n      deleteProject: [Function (anonymous)],\\n      addUser: [Function (anonymous)],\\n      deleteUser: [Function (anonymous)]\\n    },\\n    readers: {\\n      addAllAuthenticatedUsers: [Function (anonymous)],\\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\\n      addAllUsers: [Function (anonymous)],\\n      deleteAllUsers: [Function (anonymous)],\\n      addDomain: [Function (anonymous)],\\n      deleteDomain: [Function (anonymous)],\\n      addGroup: [Function (anonymous)],\\n      deleteGroup: [Function (anonymous)],\\n      addProject: [Function (anonymous)],\\n      deleteProject: [Function (anonymous)],\\n      addUser: [Function (anonymous)],\\n      deleteUser: [Function (anonymous)]\\n    },\\n    writers: {\\n      addAllAuthenticatedUsers: [Function (anonymous)],\\n      deleteAllAuthenticatedUsers: [Function (anonymous)],\\n      addAllUsers: [Function (anonymous)],\\n      deleteAllUsers: [Function (anonymous)],\\n      addDomain: [Function (anonymous)],\\n      deleteDomain: [Function (anonymous)],\\n      addGroup: [Function (anonymous)],\\n      deleteGroup: [Function (anonymous)],\\n      addProject: [Function (anonymous)],\\n      deleteProject: [Function (anonymous)],\\n      addUser: [Function (anonymous)],\\n      deleteUser: [Function (anonymous)]\\n    },\\n    pathPrefix: '/acl',\\n    request_: [Function: bound request],\\n    default: Acl {\\n      owners: [Object],\\n      readers: [Object],\\n      writers: [Object],\\n      pathPrefix: '/defaultObjectAcl',\\n      request_: [Function: bound request]\\n    }\\n  },\\n  crc32cGenerator: [Function: CRC32C_DEFAULT_VALIDATOR_GENERATOR],\\n  iam: Iam {\\n    request_: [Function: bound request],\\n    resourceId_: 'buckets/[object Promise]'\\n  },\\n  getFilesStream: [Function (anonymous)],\\n  instanceRetryValue: true,\\n  instancePreconditionOpts: undefined,\\n  [Symbol(kCapture)]: false\\n}\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:27:45.516Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 98.46ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 98.46ms"}}
[debug] [2023-09-01T16:27:45.516Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: IDLE"}}
[debug] [2023-09-01T16:27:45.516Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:27:45.516Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:27:45.516Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:28:33.561Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:28:34.562Z] Validating nodejs source
[debug] [2023-09-01T16:28:34.884Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:28:34.884Z] Building nodejs source
[debug] [2023-09-01T16:28:34.885Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:28:34.885Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:28:34.886Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8026

[debug] [2023-09-01T16:28:35.055Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:28:40.083Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:28:40.083Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: FINISHING"}}
[debug] [2023-09-01T16:28:40.088Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: exited"}}
[debug] [2023-09-01T16:28:40.088Z] [worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1ab99777-1a9f-4a78-bccf-bbac93801110]: FINISHED"}}
[debug] [2023-09-01T16:28:40.169Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:28:40.169Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585720169","timestamp":"2023-09-01T16:28:40.169Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media"}}
[debug] [2023-09-01T16:28:40.172Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:28:40.172Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:28:40.172Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:28:40.172Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e0f22f67-ad59-4460-b066-6d34418d542c","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:27:44.970Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585664970","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:27:44.970Z","updated":"2023-09-01T16:27:44.970Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"IPn1WctJCkFg+8U0Se93GNt/5IA","metadata":{"firebaseStorageDownloadTokens":"888963c4-b571-4de1-80a2-050918e76bf0"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:27:44.970Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585664970","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585664970&alt=media"}}
[debug] [2023-09-01T16:28:40.172Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:28:40.173Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:28:45.172Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:28:45.172Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585725172","timestamp":"2023-09-01T16:28:45.172Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585725148","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:28:45.148Z","updated":"2023-09-01T16:28:45.148Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Syk18t4Cg93Yf3DBJ7b0XIt3Vfg","metadata":{"firebaseStorageDownloadTokens":"fa7bfbd0-e807-4de2-911b-960d5e1be30d"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:28:45.148Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585725148","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585725148&alt=media"}}
[debug] [2023-09-01T16:28:45.176Z] *** [apiv2] error from fetch(http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast, {"headers":{},"method":"POST","body":"{\"eventId\":\"1693585725172\",\"timestamp\":\"2023-09-01T16:28:45.172Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"},\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585725148\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:28:45.148Z\",\"updated\":\"2023-09-01T16:28:45.148Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"Syk18t4Cg93Yf3DBJ7b0XIt3Vfg\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"fa7bfbd0-e807-4de2-911b-960d5e1be30d\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:28:45.148Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585725148\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585725148&alt=media\"}}"}): FetchError: request to http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast failed, reason: read ECONNRESET
[warn] ⚠  functions: Firebase Storage function was not triggered due to emulation error. Please file a bug. {"metadata":{"emulator":{"name":"storage"},"message":"Firebase Storage function was not triggered due to emulation error. Please file a bug."}}
[debug] [2023-09-01T16:29:26.530Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:29:27.532Z] Validating nodejs source
[debug] [2023-09-01T16:29:28.188Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:29:28.188Z] Building nodejs source
[debug] [2023-09-01T16:29:28.189Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:29:28.189Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:29:28.190Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8071

[debug] [2023-09-01T16:29:28.359Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:29:32.297Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:29:32.298Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585772297","timestamp":"2023-09-01T16:29:32.297Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585725148","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:28:45.148Z","updated":"2023-09-01T16:28:45.148Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Syk18t4Cg93Yf3DBJ7b0XIt3Vfg","metadata":{"firebaseStorageDownloadTokens":"fa7bfbd0-e807-4de2-911b-960d5e1be30d"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:28:45.148Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585725148","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585725148&alt=media"}}
[debug] [2023-09-01T16:29:32.317Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:29:32.317Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:29:32.317Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:29:32.317Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"55daedc4-9667-45d5-9934-ab3c58b39043","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:28:45.148Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585725148","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:28:45.148Z","updated":"2023-09-01T16:28:45.148Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"Syk18t4Cg93Yf3DBJ7b0XIt3Vfg","metadata":{"firebaseStorageDownloadTokens":"fa7bfbd0-e807-4de2-911b-960d5e1be30d"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:28:45.148Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585725148","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585725148&alt=media"}}
[debug] [2023-09-01T16:29:32.318Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:29:32.318Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:29:35.864Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:29:35.864Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585775863","timestamp":"2023-09-01T16:29:35.863Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media"}}
[debug] [2023-09-01T16:29:35.868Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:29:35.868Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:29:35.868Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:29:35.868Z"],"workRunningCount":1}
[debug] [2023-09-01T16:29:35.868Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:29:35.869Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:29:35.869Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:29:35.869Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:29:35.869Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e4fa5e38-712e-48ce-9aea-cb9f5abfc728","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:29:35.826Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media"}}
[debug] [2023-09-01T16:29:35.870Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:29:35.870Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:29:35.870Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:29:35.870Z"],"workRunningCount":1}
[debug] [2023-09-01T16:29:35.870Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:29:35.872Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:29:35.872Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:29:35.872Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:29:35.873Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:29:35.873Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:29:35.874Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:29:35.874Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:29:36.175Z] [runtime-status] [15347] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:29:36.176Z] [runtime-status] [15347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:29:36.176Z] [runtime-status] [15347] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:29:36.176Z] [runtime-status] [15347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:29:36.246Z] [runtime-status] [15347] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:29:36.246Z] [runtime-status] [15347] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:29:36.246Z] [runtime-status] [15347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:29:36.246Z] [runtime-status] [15347] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:29:36.247Z] [runtime-status] [15347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:29:36.247Z] [runtime-status] [15347] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:29:36.248Z] [runtime-status] [15347] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:29:36.268Z] [runtime-status] [15347] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:29:36.268Z] [runtime-status] [15347] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_411d73a196cfc22c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_411d73a196cfc22c.sock"}}
[debug] [2023-09-01T16:29:36.280Z] [worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: IDLE"}}
[debug] [2023-09-01T16:29:36.280Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:29:36.280Z] [worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: BUSY"}}
[debug] [2023-09-01T16:29:36.284Z] [runtime-status] [15347] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media"},"context":{"eventId":"1693585775863","timestamp":"2023-09-01T16:29:35.863Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15347] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585775826\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:29:35.826Z\",\"updated\":\"2023-09-01T16:29:35.826Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"+7ANLGxLBbcsZfNoKbJHIpORyPc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6ffec07f-57a6-448c-bd76-817ea3e3f6d8\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:29:35.826Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media\"},\"context\":{\"eventId\":\"1693585775863\",\"timestamp\":\"2023-09-01T16:29:35.863Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585775826\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:29:35.826Z\",\"updated\":\"2023-09-01T16:29:35.826Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"+7ANLGxLBbcsZfNoKbJHIpORyPc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6ffec07f-57a6-448c-bd76-817ea3e3f6d8\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:29:35.826Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: TypeError: fileName.download is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:33:43
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: fileName.download is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:33:43\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:29:36.288Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:29:36.289Z] [worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: exited"}}
[debug] [2023-09-01T16:29:36.289Z] [worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-20e4e259-c1e5-4fe3-8426-d6207273e5b1]: FINISHED"}}
[debug] [2023-09-01T16:31:15.187Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:31:16.189Z] Validating nodejs source
[debug] [2023-09-01T16:31:16.653Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:31:16.653Z] Building nodejs source
[debug] [2023-09-01T16:31:16.653Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:31:16.654Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:31:16.654Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8763

[debug] [2023-09-01T16:31:16.823Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:31:22.485Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:22.486Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585882485","timestamp":"2023-09-01T16:31:22.485Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media"}}
[debug] [2023-09-01T16:31:22.493Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:22.494Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:22.494Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:22.494Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"7bb5bc82-ef2d-49c6-9764-94204f98489f","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:29:35.826Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585775826","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:29:35.826Z","updated":"2023-09-01T16:29:35.826Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+7ANLGxLBbcsZfNoKbJHIpORyPc","metadata":{"firebaseStorageDownloadTokens":"6ffec07f-57a6-448c-bd76-817ea3e3f6d8"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:29:35.826Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585775826","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585775826&alt=media"}}
[debug] [2023-09-01T16:31:22.495Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:22.495Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:26.527Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:26.528Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585886527","timestamp":"2023-09-01T16:31:26.527Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media"}}
[debug] [2023-09-01T16:31:26.530Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:26.530Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:26.530Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:26.530Z"],"workRunningCount":1}
[debug] [2023-09-01T16:31:26.531Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:26.531Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:26.531Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:26.531Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:26.531Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"ac2b9979-dc31-4c51-85c9-2435f212bda0","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:31:26.498Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media"}}
[debug] [2023-09-01T16:31:26.532Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:26.532Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:26.532Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:26.532Z"],"workRunningCount":1}
[debug] [2023-09-01T16:31:26.532Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:31:26.534Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:31:26.534Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:31:26.534Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:31:26.535Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:31:26.535Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:31:26.536Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:26.536Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:26.843Z] [runtime-status] [15426] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:31:26.844Z] [runtime-status] [15426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:26.844Z] [runtime-status] [15426] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:31:26.844Z] [runtime-status] [15426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:26.914Z] [runtime-status] [15426] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:31:26.914Z] [runtime-status] [15426] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:31:26.915Z] [runtime-status] [15426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:26.915Z] [runtime-status] [15426] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:31:26.915Z] [runtime-status] [15426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:26.915Z] [runtime-status] [15426] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:31:26.917Z] [runtime-status] [15426] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:31:26.938Z] [runtime-status] [15426] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:31:26.938Z] [runtime-status] [15426] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_282efd5dff0ee416.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_282efd5dff0ee416.sock"}}
[debug] [2023-09-01T16:31:26.943Z] [worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: IDLE"}}
[debug] [2023-09-01T16:31:26.943Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:31:26.943Z] [worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: BUSY"}}
[debug] [2023-09-01T16:31:26.947Z] [runtime-status] [15426] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media"},"context":{"eventId":"1693585886527","timestamp":"2023-09-01T16:31:26.527Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15426] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585886498\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:31:26.498Z\",\"updated\":\"2023-09-01T16:31:26.498Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"a5RrEuJSUjrEEylj7Dr28q6N6hw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"2d533815-5f3c-41e8-9cbb-8de7f8b198ed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:31:26.498Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media\"},\"context\":{\"eventId\":\"1693585886527\",\"timestamp\":\"2023-09-01T16:31:26.527Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585886498\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:31:26.498Z\",\"updated\":\"2023-09-01T16:31:26.498Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"a5RrEuJSUjrEEylj7Dr28q6N6hw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"2d533815-5f3c-41e8-9cbb-8de7f8b198ed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:31:26.498Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: TypeError: fileBucket.basename is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: fileBucket.basename is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:31:26.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:26.952Z] [worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: exited"}}
[debug] [2023-09-01T16:31:26.952Z] [worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4c47998c-4e55-4b2a-a523-9979018659c4]: FINISHED"}}
[debug] [2023-09-01T16:31:50.772Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:31:51.774Z] Validating nodejs source
[debug] [2023-09-01T16:31:52.231Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:31:52.231Z] Building nodejs source
[debug] [2023-09-01T16:31:52.231Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:31:52.231Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:31:52.232Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8143

[debug] [2023-09-01T16:31:52.421Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:31:54.248Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:54.248Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585914247","timestamp":"2023-09-01T16:31:54.247Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media"}}
[debug] [2023-09-01T16:31:54.263Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:54.263Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:54.263Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:54.263Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"af1624d0-3ae5-4bdb-bc0c-fdb336aa3adb","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:31:26.498Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585886498","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:31:26.498Z","updated":"2023-09-01T16:31:26.498Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"a5RrEuJSUjrEEylj7Dr28q6N6hw","metadata":{"firebaseStorageDownloadTokens":"2d533815-5f3c-41e8-9cbb-8de7f8b198ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:26.498Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585886498","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585886498&alt=media"}}
[debug] [2023-09-01T16:31:54.264Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:54.264Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:31:58.071Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:58.072Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585918071","timestamp":"2023-09-01T16:31:58.071Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media"}}
[debug] [2023-09-01T16:31:58.072Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:58.072Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:58.072Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:58.072Z"],"workRunningCount":1}
[debug] [2023-09-01T16:31:58.073Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:58.073Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:58.073Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:58.073Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:31:58.073Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"a62004dd-32a2-4d8c-8f90-2149cd46d067","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:31:58.046Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media"}}
[debug] [2023-09-01T16:31:58.074Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:58.074Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:58.074Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:31:58.074Z"],"workRunningCount":1}
[debug] [2023-09-01T16:31:58.074Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:31:58.076Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:31:58.076Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:31:58.076Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:31:58.077Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:31:58.077Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:31:58.077Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:31:58.078Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:31:58.392Z] [runtime-status] [15451] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:31:58.393Z] [runtime-status] [15451] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:58.393Z] [runtime-status] [15451] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:31:58.393Z] [runtime-status] [15451] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:58.459Z] [runtime-status] [15451] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:31:58.459Z] [runtime-status] [15451] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:31:58.459Z] [runtime-status] [15451] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:58.459Z] [runtime-status] [15451] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:31:58.460Z] [runtime-status] [15451] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:31:58.460Z] [runtime-status] [15451] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:31:58.461Z] [runtime-status] [15451] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:31:58.480Z] [runtime-status] [15451] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:31:58.481Z] [runtime-status] [15451] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ebab12406837ce5e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ebab12406837ce5e.sock"}}
[debug] [2023-09-01T16:31:58.483Z] [worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: IDLE"}}
[debug] [2023-09-01T16:31:58.483Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:31:58.483Z] [worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: BUSY"}}
[debug] [2023-09-01T16:31:58.487Z] [runtime-status] [15451] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media"},"context":{"eventId":"1693585918071","timestamp":"2023-09-01T16:31:58.071Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15451] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585918045\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:31:58.046Z\",\"updated\":\"2023-09-01T16:31:58.046Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"0plUAStMOOoTS/KiizyUn2FC8eQ\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"bf9672c6-70e6-4e70-997d-097ef7cab6ab\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:31:58.046Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media\"},\"context\":{\"eventId\":\"1693585918071\",\"timestamp\":\"2023-09-01T16:31:58.071Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693585918045\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:31:58.046Z\",\"updated\":\"2023-09-01T16:31:58.046Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"0plUAStMOOoTS/KiizyUn2FC8eQ\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"bf9672c6-70e6-4e70-997d-097ef7cab6ab\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:31:58.046Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: TypeError: fileBucket.file is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: fileBucket.file is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:31:58.491Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:31:58.491Z] [worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: exited"}}
[debug] [2023-09-01T16:31:58.491Z] [worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-a2cd0da4-d003-415a-9d73-f59dd4c892ce]: FINISHED"}}
[debug] [2023-09-01T16:33:09.947Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:33:10.948Z] Validating nodejs source
[debug] [2023-09-01T16:33:11.284Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:33:11.284Z] Building nodejs source
[debug] [2023-09-01T16:33:11.284Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:33:11.284Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:33:11.285Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8422

[debug] [2023-09-01T16:33:11.453Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:33:16.294Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:16.295Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693585996294","timestamp":"2023-09-01T16:33:16.294Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media"}}
[debug] [2023-09-01T16:33:16.302Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:16.302Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:16.303Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:16.303Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"ae56b94d-1773-492a-b58a-a95bd52a6185","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:31:58.046Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693585918045","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:31:58.046Z","updated":"2023-09-01T16:31:58.046Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"0plUAStMOOoTS/KiizyUn2FC8eQ","metadata":{"firebaseStorageDownloadTokens":"bf9672c6-70e6-4e70-997d-097ef7cab6ab"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:31:58.046Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693585918045","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693585918045&alt=media"}}
[debug] [2023-09-01T16:33:16.314Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:16.314Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:33:20.632Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:20.632Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586000632","timestamp":"2023-09-01T16:33:20.632Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media"}}
[debug] [2023-09-01T16:33:20.635Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:20.635Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:20.636Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:20.635Z"],"workRunningCount":1}
[debug] [2023-09-01T16:33:20.636Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:20.637Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:20.637Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:20.637Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:20.637Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"77c08078-616c-4df2-978f-19cb301301c9","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:33:20.602Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media"}}
[debug] [2023-09-01T16:33:20.638Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:20.638Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:20.638Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:20.638Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:20.638Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:20.638Z"],"workRunningCount":1}
[debug] [2023-09-01T16:33:20.639Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:33:20.640Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:33:20.640Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:33:20.640Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:33:20.642Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:33:20.642Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:33:20.944Z] [runtime-status] [15497] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:33:20.945Z] [runtime-status] [15497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:20.945Z] [runtime-status] [15497] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:33:20.945Z] [runtime-status] [15497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:21.015Z] [runtime-status] [15497] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:33:21.015Z] [runtime-status] [15497] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:33:21.015Z] [runtime-status] [15497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:21.016Z] [runtime-status] [15497] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:33:21.016Z] [runtime-status] [15497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:21.016Z] [runtime-status] [15497] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:33:21.017Z] [runtime-status] [15497] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:33:21.038Z] [runtime-status] [15497] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:33:21.038Z] [runtime-status] [15497] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_52b89e81a40ba925.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_52b89e81a40ba925.sock"}}
[debug] [2023-09-01T16:33:21.049Z] [worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: IDLE"}}
[debug] [2023-09-01T16:33:21.049Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:33:21.049Z] [worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: BUSY"}}
[debug] [2023-09-01T16:33:21.053Z] [runtime-status] [15497] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media"},"context":{"eventId":"1693586000632","timestamp":"2023-09-01T16:33:20.632Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15497] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586000602\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:33:20.602Z\",\"updated\":\"2023-09-01T16:33:20.602Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lvMXqr++/Lo0L5YtcC5P7xqWRK0\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"e4e2a253-3622-427b-a276-459997cd8cc6\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:33:20.602Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media\"},\"context\":{\"eventId\":\"1693586000632\",\"timestamp\":\"2023-09-01T16:33:20.632Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586000602\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:33:20.602Z\",\"updated\":\"2023-09-01T16:33:20.602Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lvMXqr++/Lo0L5YtcC5P7xqWRK0\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"e4e2a253-3622-427b-a276-459997cd8cc6\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:33:20.602Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: TypeError: fileBucket.file is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: fileBucket.file is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:26:31\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:33:21.057Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:21.057Z] [worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: exited"}}
[debug] [2023-09-01T16:33:21.057Z] [worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-615ac194-8c1a-4f63-ad95-ab7466f97355]: FINISHED"}}
[debug] [2023-09-01T16:33:45.527Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:33:46.529Z] Validating nodejs source
[debug] [2023-09-01T16:33:46.988Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:33:46.988Z] Building nodejs source
[debug] [2023-09-01T16:33:46.988Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:33:46.988Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:33:46.989Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8978

[debug] [2023-09-01T16:33:47.156Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:33:49.345Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:49.345Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586029345","timestamp":"2023-09-01T16:33:49.345Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media"}}
[debug] [2023-09-01T16:33:49.352Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:49.352Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:49.352Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:49.352Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"f16d10df-5e2f-4650-ae52-06953215e6d3","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:33:20.602Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586000602","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:33:20.602Z","updated":"2023-09-01T16:33:20.602Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lvMXqr++/Lo0L5YtcC5P7xqWRK0","metadata":{"firebaseStorageDownloadTokens":"e4e2a253-3622-427b-a276-459997cd8cc6"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:20.602Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586000602","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586000602&alt=media"}}
[debug] [2023-09-01T16:33:49.354Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:49.354Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:33:53.250Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:53.250Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586033250","timestamp":"2023-09-01T16:33:53.250Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media"}}
[debug] [2023-09-01T16:33:53.253Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:53.253Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:53.253Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:53.253Z"],"workRunningCount":1}
[debug] [2023-09-01T16:33:53.253Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:53.254Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:53.254Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:53.254Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:33:53.254Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"98176363-2271-4f95-8241-cd9b8ac96415","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:33:53.224Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media"}}
[debug] [2023-09-01T16:33:53.255Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:53.255Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:53.255Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:33:53.255Z"],"workRunningCount":1}
[debug] [2023-09-01T16:33:53.255Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:33:53.257Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:33:53.257Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:33:53.257Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:33:53.259Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:33:53.259Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:33:53.260Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:33:53.260Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:33:53.557Z] [runtime-status] [15522] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:33:53.557Z] [runtime-status] [15522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:53.557Z] [runtime-status] [15522] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:33:53.558Z] [runtime-status] [15522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:53.627Z] [runtime-status] [15522] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:33:53.627Z] [runtime-status] [15522] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:33:53.627Z] [runtime-status] [15522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:53.627Z] [runtime-status] [15522] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:33:53.628Z] [runtime-status] [15522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:33:53.628Z] [runtime-status] [15522] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:33:53.629Z] [runtime-status] [15522] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:33:53.650Z] [runtime-status] [15522] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:33:53.650Z] [runtime-status] [15522] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_b8c14142ae0eef8d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_b8c14142ae0eef8d.sock"}}
[debug] [2023-09-01T16:33:53.665Z] [worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: IDLE"}}
[debug] [2023-09-01T16:33:53.665Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:33:53.665Z] [worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: BUSY"}}
[debug] [2023-09-01T16:33:53.670Z] [runtime-status] [15522] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media"},"context":{"eventId":"1693586033250","timestamp":"2023-09-01T16:33:53.250Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15522] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586033224\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:33:53.224Z\",\"updated\":\"2023-09-01T16:33:53.224Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"o436E0BCFpEXbiV1eUuo75TK5/c\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"af16f6c7-3fa8-415e-bc57-df39b79b4771\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:33:53.224Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media\"},\"context\":{\"eventId\":\"1693586033250\",\"timestamp\":\"2023-09-01T16:33:53.250Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586033224\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:33:53.224Z\",\"updated\":\"2023-09-01T16:33:53.224Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"o436E0BCFpEXbiV1eUuo75TK5/c\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"af16f6c7-3fa8-415e-bc57-df39b79b4771\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:33:53.224Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: ReferenceError: logger is not defined
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:35:3
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)
    at async runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)
    at async processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)
    at async /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"ReferenceError: logger is not defined\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:35:3\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)\n    at async runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)\n    at async processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)\n    at async /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:33:53.733Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:33:53.733Z] [worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: exited"}}
[debug] [2023-09-01T16:33:53.733Z] [worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-16e3a3ca-26bb-4475-a33a-34d977e98ae8]: FINISHED"}}
[debug] [2023-09-01T16:34:07.538Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:34:08.540Z] Validating nodejs source
[debug] [2023-09-01T16:34:08.996Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:34:08.996Z] Building nodejs source
[debug] [2023-09-01T16:34:08.996Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:34:08.997Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:34:08.997Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8745

[debug] [2023-09-01T16:34:09.162Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:34:12.610Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:34:12.611Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586052610","timestamp":"2023-09-01T16:34:12.610Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media"}}
[debug] [2023-09-01T16:34:12.616Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:34:12.617Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:34:12.617Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:34:12.617Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c26f347a-1c0b-46a9-9c53-91cf4b52c9b8","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:33:53.224Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586033224","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:33:53.224Z","updated":"2023-09-01T16:33:53.224Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"o436E0BCFpEXbiV1eUuo75TK5/c","metadata":{"firebaseStorageDownloadTokens":"af16f6c7-3fa8-415e-bc57-df39b79b4771"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:33:53.224Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586033224","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586033224&alt=media"}}
[debug] [2023-09-01T16:34:12.618Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:34:12.619Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:34:18.677Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:34:18.677Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586058677","timestamp":"2023-09-01T16:34:18.677Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media"}}
[debug] [2023-09-01T16:34:18.680Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:34:18.680Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:34:18.680Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:34:18.680Z"],"workRunningCount":1}
[debug] [2023-09-01T16:34:18.681Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:34:18.681Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:34:18.681Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:34:18.681Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:34:18.681Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"830fb56d-cfd9-4e08-8517-7959285b52a9","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:34:18.648Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media"}}
[debug] [2023-09-01T16:34:18.683Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:34:18.683Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:34:18.683Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:34:18.683Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:34:18.683Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:34:18.683Z"],"workRunningCount":1}
[debug] [2023-09-01T16:34:18.683Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:34:18.685Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:34:18.685Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:34:18.685Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:34:18.687Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:34:18.687Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:34:18.995Z] [runtime-status] [15574] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:34:18.995Z] [runtime-status] [15574] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:34:18.995Z] [runtime-status] [15574] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:34:18.996Z] [runtime-status] [15574] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:34:19.061Z] [runtime-status] [15574] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:34:19.061Z] [runtime-status] [15574] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:34:19.062Z] [runtime-status] [15574] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:34:19.062Z] [runtime-status] [15574] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:34:19.062Z] [runtime-status] [15574] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:34:19.062Z] [runtime-status] [15574] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:34:19.064Z] [runtime-status] [15574] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:34:19.083Z] [runtime-status] [15574] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:34:19.083Z] [runtime-status] [15574] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_99ef1da901e332bb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_99ef1da901e332bb.sock"}}
[debug] [2023-09-01T16:34:19.094Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: IDLE"}}
[debug] [2023-09-01T16:34:19.094Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:34:19.094Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: BUSY"}}
[debug] [2023-09-01T16:34:19.098Z] [runtime-status] [15574] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media"},"context":{"eventId":"1693586058677","timestamp":"2023-09-01T16:34:18.677Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15574] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586058648\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:34:18.648Z\",\"updated\":\"2023-09-01T16:34:18.648Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"G79V1xnJSw22kU75h7dgfyo5OVA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"e1e47db7-c61d-4126-ba30-aa2b4354613c\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:34:18.648Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media\"},\"context\":{\"eventId\":\"1693586058677\",\"timestamp\":\"2023-09-01T16:34:18.677Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586058648\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:34:18.648Z\",\"updated\":\"2023-09-01T16:34:18.648Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"G79V1xnJSw22kU75h7dgfyo5OVA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"e1e47db7-c61d-4126-ba30-aa2b4354613c\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:34:18.648Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"Image downloaded!"} {"user":{"severity":"INFO","message":"Image downloaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Image downloaded!\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:34:19.158Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 63.950583ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 63.950583ms"}}
[debug] [2023-09-01T16:34:19.158Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: IDLE"}}
[debug] [2023-09-01T16:34:19.158Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:34:19.158Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:34:19.158Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:35:21.779Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:35:22.780Z] Validating nodejs source
[debug] [2023-09-01T16:35:23.127Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:35:23.127Z] Building nodejs source
[debug] [2023-09-01T16:35:23.127Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:35:23.128Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:35:23.128Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8178

[debug] [2023-09-01T16:35:23.308Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:35:24.817Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:35:24.818Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586124817","timestamp":"2023-09-01T16:35:24.817Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media"}}
[debug] [2023-09-01T16:35:24.828Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:35:24.828Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:35:24.828Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:35:24.828Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"60e8ceea-26b8-4539-b99b-b529177819e8","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:34:18.648Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586058648","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:34:18.648Z","updated":"2023-09-01T16:34:18.648Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"G79V1xnJSw22kU75h7dgfyo5OVA","metadata":{"firebaseStorageDownloadTokens":"e1e47db7-c61d-4126-ba30-aa2b4354613c"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:34:18.648Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586058648","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586058648&alt=media"}}
[debug] [2023-09-01T16:35:24.831Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:35:24.831Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:35:28.340Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:35:28.340Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: FINISHING"}}
[debug] [2023-09-01T16:35:28.345Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: exited"}}
[debug] [2023-09-01T16:35:28.345Z] [worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-6a8a0fcb-8c37-4046-8ede-49800681193f]: FINISHED"}}
[debug] [2023-09-01T16:35:28.641Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:35:28.641Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586128640","timestamp":"2023-09-01T16:35:28.640Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media"}}
[debug] [2023-09-01T16:35:28.641Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:35:28.641Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:35:28.642Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:35:28.641Z"],"workRunningCount":1}
[debug] [2023-09-01T16:35:28.642Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:35:28.642Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:35:28.642Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:35:28.642Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:35:28.642Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c053bf47-4d6b-4d75-af95-1fba0fb09620","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:35:28.614Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media"}}
[debug] [2023-09-01T16:35:28.643Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:35:28.643Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:35:28.643Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:35:28.643Z"],"workRunningCount":1}
[debug] [2023-09-01T16:35:28.643Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:35:28.644Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:35:28.644Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:35:28.644Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:35:28.646Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:35:28.646Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:35:28.647Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:35:28.647Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:35:28.951Z] [runtime-status] [15615] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:35:28.951Z] [runtime-status] [15615] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:35:28.952Z] [runtime-status] [15615] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:35:28.952Z] [runtime-status] [15615] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:35:29.022Z] [runtime-status] [15615] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:35:29.022Z] [runtime-status] [15615] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:35:29.022Z] [runtime-status] [15615] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:35:29.023Z] [runtime-status] [15615] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:35:29.023Z] [runtime-status] [15615] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:35:29.023Z] [runtime-status] [15615] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:35:29.024Z] [runtime-status] [15615] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:35:29.045Z] [runtime-status] [15615] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:35:29.046Z] [runtime-status] [15615] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7fe67dfa97e529a5.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7fe67dfa97e529a5.sock"}}
[debug] [2023-09-01T16:35:29.051Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: IDLE"}}
[debug] [2023-09-01T16:35:29.051Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:35:29.051Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: BUSY"}}
[debug] [2023-09-01T16:35:29.055Z] [runtime-status] [15615] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media"},"context":{"eventId":"1693586128640","timestamp":"2023-09-01T16:35:28.640Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15615] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586128613\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:35:28.614Z\",\"updated\":\"2023-09-01T16:35:28.614Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"d7Kt+vu9PG5Nkf36oKTfB9UNGeM\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"388a0e2d-d016-468c-b7d0-9fdc95cabbed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:35:28.614Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media\"},\"context\":{\"eventId\":\"1693586128640\",\"timestamp\":\"2023-09-01T16:35:28.640Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586128613\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:35:28.614Z\",\"updated\":\"2023-09-01T16:35:28.614Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"d7Kt+vu9PG5Nkf36oKTfB9UNGeM\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"388a0e2d-d016-468c-b7d0-9fdc95cabbed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:35:28.614Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"Image downloaded!"} {"user":{"severity":"INFO","message":"Image downloaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Image downloaded!\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:35:29.116Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 64.868792ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 64.868792ms"}}
[debug] [2023-09-01T16:35:29.116Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: IDLE"}}
[debug] [2023-09-01T16:35:29.116Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:35:29.116Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:35:29.116Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:38:37.815Z] Sep 01, 2023 9:38:37 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:38:37 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2023-09-01T16:38:58.541Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:38:59.543Z] Validating nodejs source
[debug] [2023-09-01T16:39:00.024Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:39:00.024Z] Building nodejs source
[debug] [2023-09-01T16:39:00.025Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:39:00.025Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:39:00.025Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8122

[debug] [2023-09-01T16:39:00.194Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:39:03.217Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:39:03.217Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586343216","timestamp":"2023-09-01T16:39:03.216Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media"}}
[debug] [2023-09-01T16:39:03.222Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:39:03.222Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:39:03.222Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:39:03.222Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"894b2e90-5251-4e9b-b9f8-615c7f1d8cd0","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:35:28.614Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586128613","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:35:28.614Z","updated":"2023-09-01T16:35:28.614Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"d7Kt+vu9PG5Nkf36oKTfB9UNGeM","metadata":{"firebaseStorageDownloadTokens":"388a0e2d-d016-468c-b7d0-9fdc95cabbed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:35:28.614Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586128613","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586128613&alt=media"}}
[debug] [2023-09-01T16:39:03.224Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:39:03.224Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:39:05.229Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:39:05.229Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: FINISHING"}}
[debug] [2023-09-01T16:39:05.235Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: exited"}}
[debug] [2023-09-01T16:39:05.235Z] [worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-03216ecc-0312-47e1-a453-59292bb7d591]: FINISHED"}}
[debug] [2023-09-01T16:39:07.346Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:39:07.346Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586347346","timestamp":"2023-09-01T16:39:07.346Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media"}}
[debug] [2023-09-01T16:39:07.348Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:39:07.348Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:39:07.348Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:39:07.348Z"],"workRunningCount":1}
[debug] [2023-09-01T16:39:07.349Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:39:07.349Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:39:07.349Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:39:07.349Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:39:07.349Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"91118b8c-6c7b-491d-b495-b5810e560c74","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:39:07.318Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media"}}
[debug] [2023-09-01T16:39:07.350Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:39:07.350Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:39:07.350Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:39:07.350Z"],"workRunningCount":1}
[debug] [2023-09-01T16:39:07.350Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:39:07.352Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:39:07.352Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:39:07.352Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:39:07.353Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:39:07.353Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:39:07.354Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:39:07.354Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:39:07.665Z] [runtime-status] [15731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:39:07.665Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:39:07.665Z] [runtime-status] [15731] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:39:07.666Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:39:07.732Z] [runtime-status] [15731] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:39:07.732Z] [runtime-status] [15731] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:39:07.732Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:39:07.733Z] [runtime-status] [15731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:39:07.733Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:39:07.733Z] [runtime-status] [15731] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:39:07.734Z] [runtime-status] [15731] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:39:07.754Z] [runtime-status] [15731] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:39:07.754Z] [runtime-status] [15731] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7aee2047405289bd.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_7aee2047405289bd.sock"}}
[debug] [2023-09-01T16:39:07.757Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: IDLE"}}
[debug] [2023-09-01T16:39:07.757Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:39:07.757Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: BUSY"}}
[debug] [2023-09-01T16:39:07.761Z] [runtime-status] [15731] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media"},"context":{"eventId":"1693586347346","timestamp":"2023-09-01T16:39:07.346Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15731] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586347318\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:39:07.318Z\",\"updated\":\"2023-09-01T16:39:07.318Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"ctk6ZKAVnT2toOlCTvmNaTKXLNc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6530c533-7df7-4a37-8f52-afd6cd2e2937\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:39:07.318Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media\"},\"context\":{\"eventId\":\"1693586347346\",\"timestamp\":\"2023-09-01T16:39:07.346Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586347318\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:39:07.318Z\",\"updated\":\"2023-09-01T16:39:07.318Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"ctk6ZKAVnT2toOlCTvmNaTKXLNc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6530c533-7df7-4a37-8f52-afd6cd2e2937\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:39:07.318Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"Image downloaded!  []"} {"user":{"severity":"INFO","message":"Image downloaded!  []"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Image downloaded!  []\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:39:07.820Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 62.691417ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 62.691417ms"}}
[debug] [2023-09-01T16:39:07.820Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: IDLE"}}
[debug] [2023-09-01T16:39:07.820Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:39:07.820Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:39:07.820Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:40:23.282Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:40:24.284Z] Validating nodejs source
[debug] [2023-09-01T16:40:24.736Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:40:24.736Z] Building nodejs source
[debug] [2023-09-01T16:40:24.736Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:40:24.737Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:40:24.737Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8134

[debug] [2023-09-01T16:40:24.915Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:40:29.374Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:40:29.374Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586429373","timestamp":"2023-09-01T16:40:29.373Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media"}}
[debug] [2023-09-01T16:40:29.383Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:40:29.383Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:40:29.383Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:40:29.383Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c08ea598-9f25-4edc-9230-6617b3c28825","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:39:07.318Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586347318","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:39:07.318Z","updated":"2023-09-01T16:39:07.318Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"ctk6ZKAVnT2toOlCTvmNaTKXLNc","metadata":{"firebaseStorageDownloadTokens":"6530c533-7df7-4a37-8f52-afd6cd2e2937"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:39:07.318Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586347318","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586347318&alt=media"}}
[debug] [2023-09-01T16:40:29.384Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:40:29.384Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:40:29.944Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:40:29.944Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: FINISHING"}}
[debug] [2023-09-01T16:40:29.950Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: exited"}}
[debug] [2023-09-01T16:40:29.950Z] [worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-3e28ff34-add6-46c3-8a44-5ca0d01d05c2]: FINISHED"}}
[debug] [2023-09-01T16:40:33.881Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:40:33.881Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586433881","timestamp":"2023-09-01T16:40:33.881Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media"}}
[debug] [2023-09-01T16:40:33.884Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:40:33.884Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:40:33.884Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:40:33.884Z"],"workRunningCount":1}
[debug] [2023-09-01T16:40:33.884Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:40:33.885Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:40:33.885Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:40:33.885Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:40:33.885Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e333f1c9-6d70-41a8-bf5a-8e26ae17d016","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:40:33.852Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media"}}
[debug] [2023-09-01T16:40:33.886Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:40:33.886Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:40:33.886Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:40:33.886Z"],"workRunningCount":1}
[debug] [2023-09-01T16:40:33.886Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:40:33.888Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:40:33.888Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:40:33.888Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:40:33.889Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:40:33.889Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:40:33.889Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:40:33.890Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:40:34.239Z] [runtime-status] [15779] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:40:34.239Z] [runtime-status] [15779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:40:34.240Z] [runtime-status] [15779] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:40:34.241Z] [runtime-status] [15779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:40:34.318Z] [runtime-status] [15779] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:40:34.318Z] [runtime-status] [15779] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:40:34.318Z] [runtime-status] [15779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:40:34.319Z] [runtime-status] [15779] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:40:34.319Z] [runtime-status] [15779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:40:34.319Z] [runtime-status] [15779] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:40:34.320Z] [runtime-status] [15779] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:40:34.343Z] [runtime-status] [15779] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:40:34.343Z] [runtime-status] [15779] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_34c78f07dfca0b8b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_34c78f07dfca0b8b.sock"}}
[debug] [2023-09-01T16:40:34.396Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: IDLE"}}
[debug] [2023-09-01T16:40:34.397Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:40:34.397Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: BUSY"}}
[debug] [2023-09-01T16:40:34.401Z] [runtime-status] [15779] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media"},"context":{"eventId":"1693586433881","timestamp":"2023-09-01T16:40:33.881Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15779] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586433852\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:40:33.852Z\",\"updated\":\"2023-09-01T16:40:33.852Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"SqMRlk2dBoh5irAShFlnLwPjRBI\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"846bf5b0-1d3e-4045-9c83-fd2377a13b85\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:40:33.852Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media\"},\"context\":{\"eventId\":\"1693586433881\",\"timestamp\":\"2023-09-01T16:40:33.881Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586433852\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:40:33.852Z\",\"updated\":\"2023-09-01T16:40:33.852Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"SqMRlk2dBoh5irAShFlnLwPjRBI\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"846bf5b0-1d3e-4045-9c83-fd2377a13b85\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:40:33.852Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted File Path:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png"} {"user":{"severity":"INFO","message":"converted File Path:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted File Path:  /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png\"}"}}
[info] >  {"severity":"INFO","message":"Thumbnail uploaded!"} {"user":{"severity":"INFO","message":"Thumbnail uploaded!"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Thumbnail uploaded!\"}"}}
[debug] [2023-09-01T16:40:34.463Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 66.056291ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 66.056291ms"}}
[debug] [2023-09-01T16:40:34.463Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: IDLE"}}
[debug] [2023-09-01T16:40:34.463Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:40:34.463Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:40:34.463Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:40:49.549Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:40:50.550Z] Validating nodejs source
[debug] [2023-09-01T16:40:51.013Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:40:51.013Z] Building nodejs source
[debug] [2023-09-01T16:40:51.013Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:40:51.014Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:40:51.014Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8717

[debug] [2023-09-01T16:40:51.183Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:40:56.198Z] [worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:40:56.198Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: FINISHING"}}
[debug] [2023-09-01T16:40:56.204Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: exited"}}
[debug] [2023-09-01T16:40:56.204Z] [worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-fcf6c2a5-1d80-4bfb-8a23-32d781c33354]: FINISHED"}}
[debug] [2023-09-01T16:41:36.192Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:41:37.194Z] Validating nodejs source
[debug] [2023-09-01T16:41:37.656Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:41:37.656Z] Building nodejs source
[debug] [2023-09-01T16:41:37.656Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:41:37.656Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:41:37.656Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8229

[debug] [2023-09-01T16:41:37.822Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T16:41:40.193Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:41:40.193Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586500193","timestamp":"2023-09-01T16:41:40.193Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media"}}
[debug] [2023-09-01T16:41:40.197Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:41:40.197Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:41:40.197Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:41:40.197Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"68eae1bf-1367-41a2-af5a-9ce855f8da14","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:40:33.852Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586433852","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:40:33.852Z","updated":"2023-09-01T16:40:33.852Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"SqMRlk2dBoh5irAShFlnLwPjRBI","metadata":{"firebaseStorageDownloadTokens":"846bf5b0-1d3e-4045-9c83-fd2377a13b85"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:40:33.852Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586433852","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586433852&alt=media"}}
[debug] [2023-09-01T16:41:40.199Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:41:40.200Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:41:43.762Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:41:43.763Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586503762","timestamp":"2023-09-01T16:41:43.762Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media"}}
[debug] [2023-09-01T16:41:43.768Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:41:43.768Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:41:43.768Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:41:43.768Z"],"workRunningCount":1}
[debug] [2023-09-01T16:41:43.768Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:41:43.769Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:41:43.769Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:41:43.769Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:41:43.769Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"300d9a03-35b5-4c04-9bc8-d99a72c2b3f7","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:41:43.740Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media"}}
[debug] [2023-09-01T16:41:43.769Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:41:43.769Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:41:43.769Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:41:43.769Z"],"workRunningCount":1}
[debug] [2023-09-01T16:41:43.769Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:41:43.770Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:41:43.771Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:41:43.771Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:41:43.772Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:41:43.772Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:41:43.772Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:41:43.772Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:41:44.071Z] [runtime-status] [15841] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:41:44.071Z] [runtime-status] [15841] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:41:44.071Z] [runtime-status] [15841] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:41:44.072Z] [runtime-status] [15841] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:41:44.137Z] [runtime-status] [15841] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:41:44.138Z] [runtime-status] [15841] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:41:44.138Z] [runtime-status] [15841] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:41:44.138Z] [runtime-status] [15841] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:41:44.139Z] [runtime-status] [15841] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:41:44.139Z] [runtime-status] [15841] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:41:44.140Z] [runtime-status] [15841] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:41:44.160Z] [runtime-status] [15841] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:41:44.160Z] [runtime-status] [15841] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_bff32f24ce014e62.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_bff32f24ce014e62.sock"}}
[debug] [2023-09-01T16:41:44.180Z] [worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: IDLE"}}
[debug] [2023-09-01T16:41:44.180Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:41:44.180Z] [worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: BUSY"}}
[debug] [2023-09-01T16:41:44.184Z] [runtime-status] [15841] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media"},"context":{"eventId":"1693586503762","timestamp":"2023-09-01T16:41:43.762Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15841] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586503740\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:41:43.740Z\",\"updated\":\"2023-09-01T16:41:43.740Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"LUG8gA+v7g1wTGPQAUMnElWRkPc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"cfde8276-c072-49c7-9fb6-8c698c8aceee\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:41:43.740Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media\"},\"context\":{\"eventId\":\"1693586503762\",\"timestamp\":\"2023-09-01T16:41:43.762Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586503740\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:41:43.740Z\",\"updated\":\"2023-09-01T16:41:43.740Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"LUG8gA+v7g1wTGPQAUMnElWRkPc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"cfde8276-c072-49c7-9fb6-8c698c8aceee\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:41:43.740Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media\",\"severity\":\"INFO\"}"}}
[warn] ⚠  functions: ReferenceError: spawn is not defined
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:36:26
    at async runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)
    at async runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)
    at async processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)
    at async /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"ReferenceError: spawn is not defined\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:36:26\n    at async runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)\n    at async runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)\n    at async processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)\n    at async /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T16:41:44.245Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:41:44.245Z] [worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: exited"}}
[debug] [2023-09-01T16:41:44.245Z] [worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-2eafce90-fb15-4e5d-beac-679dcf514298]: FINISHED"}}
[debug] [2023-09-01T16:42:26.704Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T16:42:27.706Z] Validating nodejs source
[debug] [2023-09-01T16:42:28.048Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:42:28.048Z] Building nodejs source
[debug] [2023-09-01T16:42:28.048Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:42:28.049Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:42:28.049Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8557

[debug] [2023-09-01T16:42:28.223Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:42:36.490Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:42:36.491Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586556490","timestamp":"2023-09-01T16:42:36.490Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media"}}
[debug] [2023-09-01T16:42:36.502Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:42:36.502Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:42:36.502Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:42:36.502Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"8c59afb7-e710-4bf5-9fc8-63edb49946b5","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:41:43.740Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586503740","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:41:43.740Z","updated":"2023-09-01T16:41:43.740Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"LUG8gA+v7g1wTGPQAUMnElWRkPc","metadata":{"firebaseStorageDownloadTokens":"cfde8276-c072-49c7-9fb6-8c698c8aceee"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:41:43.740Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586503740","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586503740&alt=media"}}
[debug] [2023-09-01T16:42:36.504Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:42:36.505Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:42:40.058Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:42:40.058Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586560058","timestamp":"2023-09-01T16:42:40.058Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media"}}
[debug] [2023-09-01T16:42:40.062Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:42:40.062Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:42:40.062Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:42:40.062Z"],"workRunningCount":1}
[debug] [2023-09-01T16:42:40.062Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:42:40.063Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:42:40.063Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:42:40.063Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:42:40.063Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"e7a47ef3-cbac-46a6-9e25-3a69929611bf","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:42:40.024Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media"}}
[debug] [2023-09-01T16:42:40.064Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:42:40.064Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:42:40.064Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:42:40.064Z"],"workRunningCount":1}
[debug] [2023-09-01T16:42:40.064Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:42:40.066Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:42:40.066Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:42:40.066Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:42:40.067Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:42:40.067Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:42:40.069Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:42:40.069Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:42:40.373Z] [runtime-status] [15909] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:42:40.373Z] [runtime-status] [15909] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:42:40.373Z] [runtime-status] [15909] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:42:40.374Z] [runtime-status] [15909] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:42:40.442Z] [runtime-status] [15909] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:42:40.442Z] [runtime-status] [15909] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:42:40.442Z] [runtime-status] [15909] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:42:40.443Z] [runtime-status] [15909] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:42:40.443Z] [runtime-status] [15909] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:42:40.443Z] [runtime-status] [15909] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:42:40.444Z] [runtime-status] [15909] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:42:40.466Z] [runtime-status] [15909] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:42:40.466Z] [runtime-status] [15909] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ae580e2cfba3fbc3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ae580e2cfba3fbc3.sock"}}
[debug] [2023-09-01T16:42:40.476Z] [worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: IDLE"}}
[debug] [2023-09-01T16:42:40.476Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:42:40.476Z] [worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: BUSY"}}
[debug] [2023-09-01T16:42:40.480Z] [runtime-status] [15909] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media"},"context":{"eventId":"1693586560058","timestamp":"2023-09-01T16:42:40.058Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15909] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586560024\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:42:40.024Z\",\"updated\":\"2023-09-01T16:42:40.024Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"2huOIVWLHK22zEB7+oSdZwOkyfg\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"bd3fb63b-2ae2-445d-8288-06e79932c216\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:42:40.024Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media\"},\"context\":{\"eventId\":\"1693586560058\",\"timestamp\":\"2023-09-01T16:42:40.058Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586560024\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:42:40.024Z\",\"updated\":\"2023-09-01T16:42:40.024Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"2huOIVWLHK22zEB7+oSdZwOkyfg\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"bd3fb63b-2ae2-445d-8288-06e79932c216\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:42:40.024Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"} {"user":{"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted process:  ChildProcessPromise [Promise] {\\n  <pending>,\\n  _cpResolve: [Function (anonymous)],\\n  _cpReject: [Function (anonymous)],\\n  childProcess: <ref *1> ChildProcess {\\n    _events: [Object: null prototype] {\\n      error: [Function (anonymous)],\\n      close: [Function (anonymous)]\\n    },\\n    _eventsCount: 2,\\n    _maxListeners: undefined,\\n    _closesNeeded: 3,\\n    _closesGot: 0,\\n    connected: false,\\n    signalCode: null,\\n    exitCode: null,\\n    killed: false,\\n    spawnfile: 'convert',\\n    _handle: Process {\\n      onexit: [Function (anonymous)],\\n      [Symbol(owner_symbol)]: [Circular *1]\\n    },\\n    spawnargs: [\\n      'convert',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\\n    ],\\n    pid: undefined,\\n    stdin: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 1,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1402,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdout: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1403,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stderr: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1404,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdio: [ [Socket], [Socket], [Socket] ],\\n    [Symbol(kCapture)]: false\\n  }\\n}\"}"}}
[debug] [2023-09-01T16:42:40.541Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 64.603916ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 64.603916ms"}}
[debug] [2023-09-01T16:42:40.541Z] [worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: IDLE"}}
[debug] [2023-09-01T16:42:40.541Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:42:40.541Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:42:40.541Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  node:internal/errors:496 {"user":"node:internal/errors:496","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/errors:496"}}
[info] >      ErrorCaptureStackTrace(err); {"user":"    ErrorCaptureStackTrace(err);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ErrorCaptureStackTrace(err);"}}
[info] >      ^ {"user":"    ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Error: spawn convert ENOENT {"user":"Error: spawn convert ENOENT","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: spawn convert ENOENT"}}
[info] >      at ChildProcess._handle.onexit (node:internal/child_process:286:19) {"user":"    at ChildProcess._handle.onexit (node:internal/child_process:286:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ChildProcess._handle.onexit (node:internal/child_process:286:19)"}}
[info] >      at onErrorNT (node:internal/child_process:484:16) {"user":"    at onErrorNT (node:internal/child_process:484:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at onErrorNT (node:internal/child_process:484:16)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    errno: -2, {"user":"  errno: -2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   errno: -2,"}}
[info] >    code: 'ENOENT', {"user":"  code: 'ENOENT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ENOENT',"}}
[info] >    syscall: 'spawn convert', {"user":"  syscall: 'spawn convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   syscall: 'spawn convert',"}}
[info] >    path: 'convert', {"user":"  path: 'convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   path: 'convert',"}}
[info] >    spawnargs: [ {"user":"  spawnargs: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   spawnargs: ["}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC', {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',"}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png' {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v20.5.1 {"user":"Node.js v20.5.1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v20.5.1"}}
[debug] [2023-09-01T16:42:40.545Z] [worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: exited"}}
[debug] [2023-09-01T16:42:40.545Z] [worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-1a4d8384-a5de-4831-bc3b-008d26db80bf]: FINISHED"}}
[debug] [2023-09-01T16:43:31.741Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T16:43:32.741Z] Validating nodejs source
[debug] [2023-09-01T16:43:33.433Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:43:33.434Z] Building nodejs source
[debug] [2023-09-01T16:43:33.434Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:43:33.434Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:43:33.435Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8772

[debug] [2023-09-01T16:43:33.610Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:43:45.862Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:43:45.863Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586625862","timestamp":"2023-09-01T16:43:45.862Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media"}}
[debug] [2023-09-01T16:43:45.870Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:43:45.870Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:43:45.870Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:43:45.870Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"5a8e2c7f-ee49-4d4f-92ee-c2edede9cbd2","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:42:40.024Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586560024","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:42:40.024Z","updated":"2023-09-01T16:42:40.024Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2huOIVWLHK22zEB7+oSdZwOkyfg","metadata":{"firebaseStorageDownloadTokens":"bd3fb63b-2ae2-445d-8288-06e79932c216"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:42:40.024Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586560024","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586560024&alt=media"}}
[debug] [2023-09-01T16:43:45.873Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:43:45.873Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:43:53.477Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:43:53.477Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586633477","timestamp":"2023-09-01T16:43:53.477Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media"}}
[debug] [2023-09-01T16:43:53.482Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:43:53.482Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:43:53.482Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:43:53.482Z"],"workRunningCount":1}
[debug] [2023-09-01T16:43:53.482Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:43:53.482Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:43:53.482Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:43:53.483Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:43:53.483Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"8d034e85-101a-4885-9069-4e130177f3ac","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:43:53.451Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media"}}
[debug] [2023-09-01T16:43:53.483Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:43:53.483Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:43:53.483Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:43:53.483Z"],"workRunningCount":1}
[debug] [2023-09-01T16:43:53.483Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:43:53.484Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:43:53.484Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:43:53.484Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:43:53.485Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:43:53.485Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:43:53.486Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:43:53.486Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:43:53.799Z] [runtime-status] [15993] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:43:53.799Z] [runtime-status] [15993] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:43:53.800Z] [runtime-status] [15993] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:43:53.800Z] [runtime-status] [15993] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:43:53.866Z] [runtime-status] [15993] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:43:53.866Z] [runtime-status] [15993] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:43:53.866Z] [runtime-status] [15993] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:43:53.867Z] [runtime-status] [15993] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:43:53.867Z] [runtime-status] [15993] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:43:53.867Z] [runtime-status] [15993] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:43:53.868Z] [runtime-status] [15993] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:43:53.891Z] [runtime-status] [15993] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:43:53.891Z] [runtime-status] [15993] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_79c70ebdb5d2cd87.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_79c70ebdb5d2cd87.sock"}}
[debug] [2023-09-01T16:43:53.994Z] [worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: IDLE"}}
[debug] [2023-09-01T16:43:53.994Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:43:53.995Z] [worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: BUSY"}}
[debug] [2023-09-01T16:43:54.001Z] [runtime-status] [15993] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media"},"context":{"eventId":"1693586633477","timestamp":"2023-09-01T16:43:53.477Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [15993] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586633450\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:43:53.451Z\",\"updated\":\"2023-09-01T16:43:53.451Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"DH41kfegjlfS/udwIYiil0cHW/g\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"535f724a-3d06-46ce-b7e0-34a4fe70402e\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:43:53.451Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media\"},\"context\":{\"eventId\":\"1693586633477\",\"timestamp\":\"2023-09-01T16:43:53.477Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586633450\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:43:53.451Z\",\"updated\":\"2023-09-01T16:43:53.451Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"DH41kfegjlfS/udwIYiil0cHW/g\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"535f724a-3d06-46ce-b7e0-34a4fe70402e\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:43:53.451Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"} {"user":{"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted process:  ChildProcessPromise [Promise] {\\n  <pending>,\\n  _cpResolve: [Function (anonymous)],\\n  _cpReject: [Function (anonymous)],\\n  childProcess: <ref *1> ChildProcess {\\n    _events: [Object: null prototype] {\\n      error: [Function (anonymous)],\\n      close: [Function (anonymous)]\\n    },\\n    _eventsCount: 2,\\n    _maxListeners: undefined,\\n    _closesNeeded: 3,\\n    _closesGot: 0,\\n    connected: false,\\n    signalCode: null,\\n    exitCode: null,\\n    killed: false,\\n    spawnfile: 'convert',\\n    _handle: Process {\\n      onexit: [Function (anonymous)],\\n      [Symbol(owner_symbol)]: [Circular *1]\\n    },\\n    spawnargs: [\\n      'convert',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\\n    ],\\n    pid: undefined,\\n    stdin: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 1,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1402,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdout: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1403,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stderr: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1404,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdio: [ [Socket], [Socket], [Socket] ],\\n    [Symbol(kCapture)]: false\\n  }\\n}\"}"}}
[debug] [2023-09-01T16:43:54.070Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 75.360208ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 75.360208ms"}}
[debug] [2023-09-01T16:43:54.070Z] [worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: IDLE"}}
[debug] [2023-09-01T16:43:54.070Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:43:54.070Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:43:54.070Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  node:internal/errors:496 {"user":"node:internal/errors:496","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/errors:496"}}
[info] >      ErrorCaptureStackTrace(err); {"user":"    ErrorCaptureStackTrace(err);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ErrorCaptureStackTrace(err);"}}
[info] >      ^ {"user":"    ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Error: spawn convert ENOENT {"user":"Error: spawn convert ENOENT","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: spawn convert ENOENT"}}
[info] >      at ChildProcess._handle.onexit (node:internal/child_process:286:19) {"user":"    at ChildProcess._handle.onexit (node:internal/child_process:286:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ChildProcess._handle.onexit (node:internal/child_process:286:19)"}}
[info] >      at onErrorNT (node:internal/child_process:484:16) {"user":"    at onErrorNT (node:internal/child_process:484:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at onErrorNT (node:internal/child_process:484:16)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    errno: -2, {"user":"  errno: -2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   errno: -2,"}}
[info] >    code: 'ENOENT', {"user":"  code: 'ENOENT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ENOENT',"}}
[info] >    syscall: 'spawn convert', {"user":"  syscall: 'spawn convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   syscall: 'spawn convert',"}}
[info] >    path: 'convert', {"user":"  path: 'convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   path: 'convert',"}}
[info] >    spawnargs: [ {"user":"  spawnargs: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   spawnargs: ["}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC', {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',"}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png' {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v20.5.1 {"user":"Node.js v20.5.1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v20.5.1"}}
[debug] [2023-09-01T16:43:54.074Z] [worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: exited"}}
[debug] [2023-09-01T16:43:54.074Z] [worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-588a4bc7-a66e-49a2-ab0c-23a6c708b208]: FINISHED"}}
[debug] [2023-09-01T16:45:09.987Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T16:45:09.987Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T16:45:10.989Z] Validating nodejs source
[debug] [2023-09-01T16:45:11.441Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "gm": "^1.25.0",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:45:11.441Z] Building nodejs source
[debug] [2023-09-01T16:45:11.441Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:45:11.441Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:45:11.442Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8541

[debug] [2023-09-01T16:45:11.620Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:45:22.324Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:45:22.325Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586722324","timestamp":"2023-09-01T16:45:22.324Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media"}}
[debug] [2023-09-01T16:45:22.330Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:45:22.330Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:45:22.330Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:45:22.331Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"285a2871-5ce5-4119-acf9-3f0486cc4a16","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:43:53.451Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586633450","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:43:53.451Z","updated":"2023-09-01T16:43:53.451Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"DH41kfegjlfS/udwIYiil0cHW/g","metadata":{"firebaseStorageDownloadTokens":"535f724a-3d06-46ce-b7e0-34a4fe70402e"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:43:53.451Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586633450","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586633450&alt=media"}}
[debug] [2023-09-01T16:45:22.332Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:45:22.333Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:45:26.911Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:45:26.911Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586726911","timestamp":"2023-09-01T16:45:26.911Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media"}}
[debug] [2023-09-01T16:45:26.914Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:45:26.914Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:45:26.915Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:45:26.914Z"],"workRunningCount":1}
[debug] [2023-09-01T16:45:26.915Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:45:26.916Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:45:26.916Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:45:26.916Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:45:26.916Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"77227be3-03cb-48c5-bc96-a6e1f5749bdd","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:45:26.880Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media"}}
[debug] [2023-09-01T16:45:26.917Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:45:26.917Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:45:26.917Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:45:26.917Z"],"workRunningCount":1}
[debug] [2023-09-01T16:45:26.917Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:45:26.919Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:45:26.919Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:45:26.919Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:45:26.920Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:45:26.920Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:45:26.922Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:45:26.922Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:45:27.230Z] [runtime-status] [16151] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:45:27.230Z] [runtime-status] [16151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:45:27.230Z] [runtime-status] [16151] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:45:27.231Z] [runtime-status] [16151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:45:27.303Z] [runtime-status] [16151] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:45:27.303Z] [runtime-status] [16151] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:45:27.303Z] [runtime-status] [16151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:45:27.303Z] [runtime-status] [16151] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:45:27.304Z] [runtime-status] [16151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:45:27.304Z] [runtime-status] [16151] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:45:27.305Z] [runtime-status] [16151] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:45:27.329Z] [runtime-status] [16151] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:45:27.329Z] [runtime-status] [16151] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_c0ca14e11f6c00ad.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_c0ca14e11f6c00ad.sock"}}
[debug] [2023-09-01T16:45:27.431Z] [worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: IDLE"}}
[debug] [2023-09-01T16:45:27.432Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:45:27.432Z] [worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: BUSY"}}
[debug] [2023-09-01T16:45:27.438Z] [runtime-status] [16151] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media"},"context":{"eventId":"1693586726911","timestamp":"2023-09-01T16:45:26.911Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16151] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586726880\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:45:26.880Z\",\"updated\":\"2023-09-01T16:45:26.880Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"+fUlqybD+s3MnwEPVKNgEnH01XI\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"75db91a6-fb29-41e5-a09c-de5709d36bd2\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:45:26.880Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media\"},\"context\":{\"eventId\":\"1693586726911\",\"timestamp\":\"2023-09-01T16:45:26.911Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586726880\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:45:26.880Z\",\"updated\":\"2023-09-01T16:45:26.880Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"+fUlqybD+s3MnwEPVKNgEnH01XI\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"75db91a6-fb29-41e5-a09c-de5709d36bd2\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:45:26.880Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"} {"user":{"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted process:  ChildProcessPromise [Promise] {\\n  <pending>,\\n  _cpResolve: [Function (anonymous)],\\n  _cpReject: [Function (anonymous)],\\n  childProcess: <ref *1> ChildProcess {\\n    _events: [Object: null prototype] {\\n      error: [Function (anonymous)],\\n      close: [Function (anonymous)]\\n    },\\n    _eventsCount: 2,\\n    _maxListeners: undefined,\\n    _closesNeeded: 3,\\n    _closesGot: 0,\\n    connected: false,\\n    signalCode: null,\\n    exitCode: null,\\n    killed: false,\\n    spawnfile: 'convert',\\n    _handle: Process {\\n      onexit: [Function (anonymous)],\\n      [Symbol(owner_symbol)]: [Circular *1]\\n    },\\n    spawnargs: [\\n      'convert',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\\n    ],\\n    pid: undefined,\\n    stdin: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 1,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1402,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdout: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1403,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stderr: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1404,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdio: [ [Socket], [Socket], [Socket] ],\\n    [Symbol(kCapture)]: false\\n  }\\n}\"}"}}
[debug] [2023-09-01T16:45:27.506Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 73.858625ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 73.858625ms"}}
[debug] [2023-09-01T16:45:27.506Z] [worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: IDLE"}}
[debug] [2023-09-01T16:45:27.506Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:45:27.506Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:45:27.506Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  node:internal/errors:496 {"user":"node:internal/errors:496","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/errors:496"}}
[info] >      ErrorCaptureStackTrace(err); {"user":"    ErrorCaptureStackTrace(err);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ErrorCaptureStackTrace(err);"}}
[info] >      ^ {"user":"    ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Error: spawn convert ENOENT {"user":"Error: spawn convert ENOENT","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: spawn convert ENOENT"}}
[info] >      at ChildProcess._handle.onexit (node:internal/child_process:286:19) {"user":"    at ChildProcess._handle.onexit (node:internal/child_process:286:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ChildProcess._handle.onexit (node:internal/child_process:286:19)"}}
[info] >      at onErrorNT (node:internal/child_process:484:16) {"user":"    at onErrorNT (node:internal/child_process:484:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at onErrorNT (node:internal/child_process:484:16)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    errno: -2, {"user":"  errno: -2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   errno: -2,"}}
[info] >    code: 'ENOENT', {"user":"  code: 'ENOENT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ENOENT',"}}
[info] >    syscall: 'spawn convert', {"user":"  syscall: 'spawn convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   syscall: 'spawn convert',"}}
[info] >    path: 'convert', {"user":"  path: 'convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   path: 'convert',"}}
[info] >    spawnargs: [ {"user":"  spawnargs: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   spawnargs: ["}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC', {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',"}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png' {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v20.5.1 {"user":"Node.js v20.5.1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v20.5.1"}}
[debug] [2023-09-01T16:45:27.509Z] [worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: exited"}}
[debug] [2023-09-01T16:45:27.509Z] [worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-7d4b3ebb-5707-4437-b4b7-30072fd79722]: FINISHED"}}
[debug] [2023-09-01T16:46:52.732Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T16:46:53.734Z] Validating nodejs source
[debug] [2023-09-01T16:46:54.230Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "gm": "^1.25.0",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:46:54.230Z] Building nodejs source
[debug] [2023-09-01T16:46:54.230Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:46:54.230Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:46:54.231Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8969

[debug] [2023-09-01T16:46:54.405Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:47:04.094Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:04.095Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586824094","timestamp":"2023-09-01T16:47:04.094Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media"}}
[debug] [2023-09-01T16:47:04.105Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:04.106Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:47:04.106Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:04.106Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"84c0b738-6f12-43ce-82e9-aad863bb3a80","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:45:26.880Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586726880","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:45:26.880Z","updated":"2023-09-01T16:45:26.880Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"+fUlqybD+s3MnwEPVKNgEnH01XI","metadata":{"firebaseStorageDownloadTokens":"75db91a6-fb29-41e5-a09c-de5709d36bd2"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:45:26.880Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586726880","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586726880&alt=media"}}
[debug] [2023-09-01T16:47:04.108Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:04.108Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:47:08.443Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:08.444Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586828443","timestamp":"2023-09-01T16:47:08.443Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media"}}
[debug] [2023-09-01T16:47:08.447Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:47:08.447Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:47:08.448Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:47:08.447Z"],"workRunningCount":1}
[debug] [2023-09-01T16:47:08.448Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:47:08.449Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:08.449Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:47:08.449Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:08.449Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"41a6237e-2d90-4262-84a1-1973ebb677b0","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:47:08.410Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media"}}
[debug] [2023-09-01T16:47:08.450Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:08.450Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:47:08.450Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:47:08.450Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T16:47:08.451Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T16:47:08.450Z"],"workRunningCount":1}
[debug] [2023-09-01T16:47:08.451Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T16:47:08.452Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T16:47:08.452Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T16:47:08.452Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T16:47:08.453Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T16:47:08.453Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T16:47:08.773Z] [runtime-status] [16233] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:47:08.774Z] [runtime-status] [16233] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:47:08.774Z] [runtime-status] [16233] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T16:47:08.774Z] [runtime-status] [16233] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:47:08.843Z] [runtime-status] [16233] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T16:47:08.843Z] [runtime-status] [16233] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T16:47:08.843Z] [runtime-status] [16233] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:47:08.844Z] [runtime-status] [16233] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T16:47:08.844Z] [runtime-status] [16233] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T16:47:08.844Z] [runtime-status] [16233] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T16:47:08.845Z] [runtime-status] [16233] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T16:47:08.867Z] [runtime-status] [16233] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T16:47:08.867Z] [runtime-status] [16233] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_671817d422a1fec7.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_671817d422a1fec7.sock"}}
[debug] [2023-09-01T16:47:08.963Z] [worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: IDLE"}}
[debug] [2023-09-01T16:47:08.963Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T16:47:08.963Z] [worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: BUSY"}}
[debug] [2023-09-01T16:47:08.970Z] [runtime-status] [16233] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media"},"context":{"eventId":"1693586828443","timestamp":"2023-09-01T16:47:08.443Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [16233] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586828410\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:47:08.410Z\",\"updated\":\"2023-09-01T16:47:08.410Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lP2ezKNbyhVNvNZUdYkB5KUQgJ8\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"38772d88-6162-465e-b54e-7aa6097e15ed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:47:08.410Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media\"},\"context\":{\"eventId\":\"1693586828443\",\"timestamp\":\"2023-09-01T16:47:08.443Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693586828410\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T16:47:08.410Z\",\"updated\":\"2023-09-01T16:47:08.410Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"lP2ezKNbyhVNvNZUdYkB5KUQgJ8\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"38772d88-6162-465e-b54e-7aa6097e15ed\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T16:47:08.410Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"} {"user":{"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted process:  ChildProcessPromise [Promise] {\\n  <pending>,\\n  _cpResolve: [Function (anonymous)],\\n  _cpReject: [Function (anonymous)],\\n  childProcess: <ref *1> ChildProcess {\\n    _events: [Object: null prototype] {\\n      error: [Function (anonymous)],\\n      close: [Function (anonymous)]\\n    },\\n    _eventsCount: 2,\\n    _maxListeners: undefined,\\n    _closesNeeded: 3,\\n    _closesGot: 0,\\n    connected: false,\\n    signalCode: null,\\n    exitCode: null,\\n    killed: false,\\n    spawnfile: 'convert',\\n    _handle: Process {\\n      onexit: [Function (anonymous)],\\n      [Symbol(owner_symbol)]: [Circular *1]\\n    },\\n    spawnargs: [\\n      'convert',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\\n    ],\\n    pid: undefined,\\n    stdin: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 1,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1402,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdout: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1403,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stderr: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1404,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdio: [ [Socket], [Socket], [Socket] ],\\n    [Symbol(kCapture)]: false\\n  }\\n}\"}"}}
[debug] [2023-09-01T16:47:09.038Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 74.594625ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 74.594625ms"}}
[debug] [2023-09-01T16:47:09.038Z] [worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: IDLE"}}
[debug] [2023-09-01T16:47:09.038Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T16:47:09.038Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T16:47:09.038Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  node:internal/errors:496 {"user":"node:internal/errors:496","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/errors:496"}}
[info] >      ErrorCaptureStackTrace(err); {"user":"    ErrorCaptureStackTrace(err);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ErrorCaptureStackTrace(err);"}}
[info] >      ^ {"user":"    ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Error: spawn convert ENOENT {"user":"Error: spawn convert ENOENT","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: spawn convert ENOENT"}}
[info] >      at ChildProcess._handle.onexit (node:internal/child_process:286:19) {"user":"    at ChildProcess._handle.onexit (node:internal/child_process:286:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ChildProcess._handle.onexit (node:internal/child_process:286:19)"}}
[info] >      at onErrorNT (node:internal/child_process:484:16) {"user":"    at onErrorNT (node:internal/child_process:484:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at onErrorNT (node:internal/child_process:484:16)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    errno: -2, {"user":"  errno: -2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   errno: -2,"}}
[info] >    code: 'ENOENT', {"user":"  code: 'ENOENT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ENOENT',"}}
[info] >    syscall: 'spawn convert', {"user":"  syscall: 'spawn convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   syscall: 'spawn convert',"}}
[info] >    path: 'convert', {"user":"  path: 'convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   path: 'convert',"}}
[info] >    spawnargs: [ {"user":"  spawnargs: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   spawnargs: ["}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC', {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',"}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png' {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v20.5.1 {"user":"Node.js v20.5.1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v20.5.1"}}
[debug] [2023-09-01T16:47:09.042Z] [worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: exited"}}
[debug] [2023-09-01T16:47:09.042Z] [worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-d25a0fe0-d2a6-480f-9dac-7c153d6d6651]: FINISHED"}}
[debug] [2023-09-01T16:47:49.266Z] Sep 01, 2023 9:47:49 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:47:49 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2023-09-01T16:47:49.394Z] Sep 01, 2023 9:47:49 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:47:49 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-09-01T16:47:59.700Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:59.700Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693586879700","timestamp":"2023-09-01T16:47:59.700Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media"}}
[debug] [2023-09-01T16:47:59.708Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:59.708Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:47:59.709Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T16:47:59.710Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"339f4a1e-10b1-4ce6-9532-7b8042cd22b0","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T16:47:08.410Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693586828410","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T16:47:08.410Z","updated":"2023-09-01T16:47:08.410Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"lP2ezKNbyhVNvNZUdYkB5KUQgJ8","metadata":{"firebaseStorageDownloadTokens":"38772d88-6162-465e-b54e-7aa6097e15ed"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T16:47:08.410Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693586828410","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693586828410&alt=media"}}
[debug] [2023-09-01T16:47:59.711Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T16:47:59.711Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T16:48:09.619Z] Sep 01, 2023 9:48:09 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:48:09 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2023-09-01T16:48:09.739Z] Sep 01, 2023 9:48:09 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 01, 2023 9:48:09 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-09-01T16:55:56.063Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T16:55:56.063Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T16:55:57.066Z] Validating nodejs source
[debug] [2023-09-01T16:55:57.742Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "gm": "^1.25.0",
    "mkdirp": "^3.0.1",
    "sharp": "^0.32.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:55:57.742Z] Building nodejs source
[debug] [2023-09-01T16:55:57.742Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:55:57.742Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:55:57.743Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8122

[debug] [2023-09-01T16:55:57.920Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T16:56:37.457Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T16:56:38.458Z] Validating nodejs source
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: There was an error reading functions/package.json:

 Trailing comma in object at 22:3
  },
  ^
File: "/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json" {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: There was an error reading functions/package.json:\n\n Trailing comma in object at 22:3\n  },\n  ^\nFile: \"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json\""}}
[debug] [2023-09-01T16:57:26.389Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T16:57:27.389Z] Validating nodejs source
[debug] [2023-09-01T16:57:27.727Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T16:57:27.728Z] Building nodejs source
[debug] [2023-09-01T16:57:27.728Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T16:57:27.728Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T16:57:27.728Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8716

[debug] [2023-09-01T16:57:27.908Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T17:44:18.754Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T17:44:19.755Z] Validating nodejs source
[debug] [2023-09-01T17:44:20.112Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:44:20.112Z] Building nodejs source
[debug] [2023-09-01T17:44:20.112Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:44:20.112Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:44:20.113Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8092

[debug] [2023-09-01T17:44:20.267Z] Got response code 400; body Failed to generate manifest from function source: Error: Cannot find module 'sharp'
Require stack:
- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js
- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/runtime/loader.js
- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js
[info] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-09-01T17:44:36.480Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:44:36.480Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590276480","timestamp":"2023-09-01T17:44:36.480Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590276459","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:44:36.459Z","updated":"2023-09-01T17:44:36.459Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2TCXMftJ8jKj9xNgm99NyPFWzy0","metadata":{"firebaseStorageDownloadTokens":"3751f1ae-22bd-4572-8bfa-d92be2c60d48"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:44:36.459Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590276459","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590276459&alt=media"}}
[debug] [2023-09-01T17:44:36.484Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:44:36.484Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:44:36.484Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:44:36.484Z"],"workRunningCount":1}
[debug] [2023-09-01T17:44:36.484Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:44:36.485Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:44:36.485Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:44:36.485Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:44:36.485Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"825b5f92-41c3-4e14-b079-daf348b8ba3f","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:44:36.459Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590276459","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:44:36.459Z","updated":"2023-09-01T17:44:36.459Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2TCXMftJ8jKj9xNgm99NyPFWzy0","metadata":{"firebaseStorageDownloadTokens":"3751f1ae-22bd-4572-8bfa-d92be2c60d48"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:44:36.459Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590276459","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590276459&alt=media"}}
[debug] [2023-09-01T17:44:36.486Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:44:36.486Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:44:36.486Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:44:36.486Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:44:36.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:44:36.486Z"],"workRunningCount":1}
[debug] [2023-09-01T17:44:36.486Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:44:36.487Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:44:36.487Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:44:36.487Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:44:36.488Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:44:36.488Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:44:36.820Z] [runtime-status] [17449] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:44:36.820Z] [runtime-status] [17449] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:44:36.820Z] [runtime-status] [17449] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:44:36.821Z] [runtime-status] [17449] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:44:36.890Z] [runtime-status] [17449] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:44:36.890Z] [runtime-status] [17449] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:44:36.890Z] [runtime-status] [17449] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:44:36.890Z] [runtime-status] [17449] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:44:36.891Z] [runtime-status] [17449] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:44:36.891Z] [runtime-status] [17449] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:44:36.892Z] [runtime-status] [17449] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17449] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[warn] ⚠  Error: Cannot find module 'sharp'
Require stack:
- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js
- /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js
    at Module._resolveFilename (node:internal/modules/cjs/loader:1048:15)
    at Module._load (node:internal/modules/cjs/loader:901:27)
    at Module.require (node:internal/modules/cjs/loader:1115:19)
    at require (node:internal/modules/helpers:130:18)
    at Object.<anonymous> (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:11:15)
    at Module._compile (node:internal/modules/cjs/loader:1233:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1287:10)
    at Module.load (node:internal/modules/cjs/loader:1091:32)
    at Module._load (node:internal/modules/cjs/loader:938:12)
    at Module.require (node:internal/modules/cjs/loader:1115:19) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Error: Cannot find module 'sharp'\nRequire stack:\n- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js\n- /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1048:15)\n    at Module._load (node:internal/modules/cjs/loader:901:27)\n    at Module.require (node:internal/modules/cjs/loader:1115:19)\n    at require (node:internal/modules/helpers:130:18)\n    at Object.<anonymous> (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:11:15)\n    at Module._compile (node:internal/modules/cjs/loader:1233:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1287:10)\n    at Module.load (node:internal/modules/cjs/loader:1091:32)\n    at Module._load (node:internal/modules/cjs/loader:938:12)\n    at Module.require (node:internal/modules/cjs/loader:1115:19)"}}
[warn] ⚠  We were unable to load your functions code. (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{}}}
[warn] ⚠  functions: Failed to initialize and load triggers. This shouldn't happen: Cannot find module 'sharp'
Require stack:
- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js
- /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Failed to initialize and load triggers. This shouldn't happen: Cannot find module 'sharp'\nRequire stack:\n- /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js\n- /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2023-09-01T17:44:36.898Z] [worker-us-central1-firstGenGenerateThumbnail-c99fdb56-b665-4506-85c3-7c1172d3da58]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c99fdb56-b665-4506-85c3-7c1172d3da58]: exited"}}
[debug] [2023-09-01T17:44:36.899Z] [worker-us-central1-firstGenGenerateThumbnail-c99fdb56-b665-4506-85c3-7c1172d3da58]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c99fdb56-b665-4506-85c3-7c1172d3da58]: FINISHED"}}
[error] ⬢  functions: Failed to handle request for function us-central1-firstGenGenerateThumbnail {"metadata":{"emulator":{"name":"functions"},"message":"Failed to handle request for function us-central1-firstGenGenerateThumbnail"}}
[error] ⬢  functions: Failed to start functions in /Users/lukey/Sites/misinfo/misinfo-dashboard/functions: FirebaseError: Failed to load function. {"metadata":{"emulator":{"name":"functions"},"message":"Failed to start functions in /Users/lukey/Sites/misinfo/misinfo-dashboard/functions: FirebaseError: Failed to load function."}}
[debug] [2023-09-01T17:45:06.544Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:45:24.055Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T17:45:25.057Z] Validating nodejs source
[debug] [2023-09-01T17:45:25.730Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:45:25.730Z] Building nodejs source
[debug] [2023-09-01T17:45:25.730Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:45:25.730Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:45:25.731Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8884

[debug] [2023-09-01T17:45:25.889Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T17:45:32.473Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:45:32.473Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590332473","timestamp":"2023-09-01T17:45:32.473Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590276459","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:44:36.459Z","updated":"2023-09-01T17:44:36.459Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2TCXMftJ8jKj9xNgm99NyPFWzy0","metadata":{"firebaseStorageDownloadTokens":"3751f1ae-22bd-4572-8bfa-d92be2c60d48"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:44:36.459Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590276459","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590276459&alt=media"}}
[debug] [2023-09-01T17:45:32.477Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:45:32.477Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:45:32.477Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:45:32.477Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"7524d678-a8a0-4983-832b-7cd24435d322","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:44:36.459Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590276459","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:44:36.459Z","updated":"2023-09-01T17:44:36.459Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"2TCXMftJ8jKj9xNgm99NyPFWzy0","metadata":{"firebaseStorageDownloadTokens":"3751f1ae-22bd-4572-8bfa-d92be2c60d48"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:44:36.459Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590276459","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590276459&alt=media"}}
[debug] [2023-09-01T17:45:32.479Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:45:32.479Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:45:36.081Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:45:36.081Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590336081","timestamp":"2023-09-01T17:45:36.081Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media"}}
[debug] [2023-09-01T17:45:36.083Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:45:36.083Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:45:36.083Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:45:36.083Z"],"workRunningCount":1}
[debug] [2023-09-01T17:45:36.083Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:45:36.084Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:45:36.084Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:45:36.084Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:45:36.084Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"c7fdf96d-37ff-4217-a30d-6f3a74136036","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:45:36.059Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media"}}
[debug] [2023-09-01T17:45:36.085Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:45:36.085Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:45:36.085Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:45:36.085Z"],"workRunningCount":1}
[debug] [2023-09-01T17:45:36.085Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:45:36.086Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:45:36.086Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:45:36.086Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:45:36.087Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:45:36.087Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:45:36.088Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:45:36.088Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:45:36.402Z] [runtime-status] [17491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:45:36.402Z] [runtime-status] [17491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:45:36.403Z] [runtime-status] [17491] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:45:36.403Z] [runtime-status] [17491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:45:36.471Z] [runtime-status] [17491] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:45:36.471Z] [runtime-status] [17491] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:45:36.471Z] [runtime-status] [17491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:45:36.471Z] [runtime-status] [17491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:45:36.472Z] [runtime-status] [17491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:45:36.472Z] [runtime-status] [17491] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:45:36.473Z] [runtime-status] [17491] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:45:36.483Z] [runtime-status] [17491] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:45:36.483Z] [runtime-status] [17491] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_6cf5c30e9528f213.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_6cf5c30e9528f213.sock"}}
[debug] [2023-09-01T17:45:36.495Z] [worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: IDLE"}}
[debug] [2023-09-01T17:45:36.495Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:45:36.495Z] [worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: BUSY"}}
[debug] [2023-09-01T17:45:36.500Z] [runtime-status] [17491] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media"},"context":{"eventId":"1693590336081","timestamp":"2023-09-01T17:45:36.081Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17491] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590336059\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T17:45:36.059Z\",\"updated\":\"2023-09-01T17:45:36.059Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"1Ih4dfd0OZ21raW+wJCc/B+b7Ig\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"9e1f0273-f55f-4108-a4a3-c7da0824b194\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T17:45:36.059Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media\"},\"context\":{\"eventId\":\"1693590336081\",\"timestamp\":\"2023-09-01T17:45:36.081Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[info] >  {"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media","severity":"INFO"} {"user":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media","severity":"INFO"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590336059\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T17:45:36.059Z\",\"updated\":\"2023-09-01T17:45:36.059Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"1Ih4dfd0OZ21raW+wJCc/B+b7Ig\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"9e1f0273-f55f-4108-a4a3-c7da0824b194\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T17:45:36.059Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media\",\"severity\":\"INFO\"}"}}
[info] >  {"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"} {"user":{"severity":"INFO","message":"converted process:  ChildProcessPromise [Promise] {\n  <pending>,\n  _cpResolve: [Function (anonymous)],\n  _cpReject: [Function (anonymous)],\n  childProcess: <ref *1> ChildProcess {\n    _events: [Object: null prototype] {\n      error: [Function (anonymous)],\n      close: [Function (anonymous)]\n    },\n    _eventsCount: 2,\n    _maxListeners: undefined,\n    _closesNeeded: 3,\n    _closesGot: 0,\n    connected: false,\n    signalCode: null,\n    exitCode: null,\n    killed: false,\n    spawnfile: 'convert',\n    _handle: Process {\n      onexit: [Function (anonymous)],\n      [Symbol(owner_symbol)]: [Circular *1]\n    },\n    spawnargs: [\n      'convert',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\n    ],\n    pid: undefined,\n    stdin: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 1,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1402,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdout: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1403,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stderr: Socket {\n      connecting: false,\n      _hadError: false,\n      _parent: null,\n      _host: null,\n      _closeAfterHandlingError: false,\n      _readableState: [ReadableState],\n      _events: [Object: null prototype],\n      _eventsCount: 2,\n      _maxListeners: undefined,\n      _writableState: [WritableState],\n      allowHalfOpen: false,\n      _sockname: null,\n      _pendingData: null,\n      _pendingEncoding: '',\n      server: null,\n      _server: null,\n      [Symbol(async_id_symbol)]: 1404,\n      [Symbol(kHandle)]: [Pipe],\n      [Symbol(lastWriteQueueSize)]: 0,\n      [Symbol(timeout)]: null,\n      [Symbol(kBuffer)]: null,\n      [Symbol(kBufferCb)]: null,\n      [Symbol(kBufferGen)]: null,\n      [Symbol(kCapture)]: false,\n      [Symbol(kSetNoDelay)]: false,\n      [Symbol(kSetKeepAlive)]: false,\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\n      [Symbol(kBytesRead)]: 0,\n      [Symbol(kBytesWritten)]: 0\n    },\n    stdio: [ [Socket], [Socket], [Socket] ],\n    [Symbol(kCapture)]: false\n  }\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"converted process:  ChildProcessPromise [Promise] {\\n  <pending>,\\n  _cpResolve: [Function (anonymous)],\\n  _cpReject: [Function (anonymous)],\\n  childProcess: <ref *1> ChildProcess {\\n    _events: [Object: null prototype] {\\n      error: [Function (anonymous)],\\n      close: [Function (anonymous)]\\n    },\\n    _eventsCount: 2,\\n    _maxListeners: undefined,\\n    _closesNeeded: 3,\\n    _closesGot: 0,\\n    connected: false,\\n    signalCode: null,\\n    exitCode: null,\\n    killed: false,\\n    spawnfile: 'convert',\\n    _handle: Process {\\n      onexit: [Function (anonymous)],\\n      [Symbol(owner_symbol)]: [Circular *1]\\n    },\\n    spawnargs: [\\n      'convert',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',\\n      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'\\n    ],\\n    pid: undefined,\\n    stdin: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 1,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1402,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdout: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1403,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stderr: Socket {\\n      connecting: false,\\n      _hadError: false,\\n      _parent: null,\\n      _host: null,\\n      _closeAfterHandlingError: false,\\n      _readableState: [ReadableState],\\n      _events: [Object: null prototype],\\n      _eventsCount: 2,\\n      _maxListeners: undefined,\\n      _writableState: [WritableState],\\n      allowHalfOpen: false,\\n      _sockname: null,\\n      _pendingData: null,\\n      _pendingEncoding: '',\\n      server: null,\\n      _server: null,\\n      [Symbol(async_id_symbol)]: 1404,\\n      [Symbol(kHandle)]: [Pipe],\\n      [Symbol(lastWriteQueueSize)]: 0,\\n      [Symbol(timeout)]: null,\\n      [Symbol(kBuffer)]: null,\\n      [Symbol(kBufferCb)]: null,\\n      [Symbol(kBufferGen)]: null,\\n      [Symbol(kCapture)]: false,\\n      [Symbol(kSetNoDelay)]: false,\\n      [Symbol(kSetKeepAlive)]: false,\\n      [Symbol(kSetKeepAliveInitialDelay)]: 0,\\n      [Symbol(kBytesRead)]: 0,\\n      [Symbol(kBytesWritten)]: 0\\n    },\\n    stdio: [ [Socket], [Socket], [Socket] ],\\n    [Symbol(kCapture)]: false\\n  }\\n}\"}"}}
[debug] [2023-09-01T17:45:36.581Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-firstGenGenerateThumbnail" in 86.105334ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finished \"us-central1-firstGenGenerateThumbnail\" in 86.105334ms"}}
[debug] [2023-09-01T17:45:36.581Z] [worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: IDLE"}}
[debug] [2023-09-01T17:45:36.581Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-01T17:45:36.581Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-01T17:45:36.581Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  node:internal/errors:496 {"user":"node:internal/errors:496","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/errors:496"}}
[info] >      ErrorCaptureStackTrace(err); {"user":"    ErrorCaptureStackTrace(err);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ErrorCaptureStackTrace(err);"}}
[info] >      ^ {"user":"    ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Error: spawn convert ENOENT {"user":"Error: spawn convert ENOENT","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: spawn convert ENOENT"}}
[info] >      at ChildProcess._handle.onexit (node:internal/child_process:286:19) {"user":"    at ChildProcess._handle.onexit (node:internal/child_process:286:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ChildProcess._handle.onexit (node:internal/child_process:286:19)"}}
[info] >      at onErrorNT (node:internal/child_process:484:16) {"user":"    at onErrorNT (node:internal/child_process:484:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at onErrorNT (node:internal/child_process:484:16)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    errno: -2, {"user":"  errno: -2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   errno: -2,"}}
[info] >    code: 'ENOENT', {"user":"  code: 'ENOENT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ENOENT',"}}
[info] >    syscall: 'spawn convert', {"user":"  syscall: 'spawn convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   syscall: 'spawn convert',"}}
[info] >    path: 'convert', {"user":"  path: 'convert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   path: 'convert',"}}
[info] >    spawnargs: [ {"user":"  spawnargs: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   spawnargs: ["}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC', {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC',"}}
[info] >      '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png' {"user":"    '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m     '/var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/IMG_0686.HEIC.png'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v20.5.1 {"user":"Node.js v20.5.1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v20.5.1"}}
[debug] [2023-09-01T17:45:36.585Z] [worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: exited"}}
[debug] [2023-09-01T17:45:36.585Z] [worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-29f232b9-56b9-4c8d-ae28-cbfd315da617]: FINISHED"}}
[debug] [2023-09-01T17:48:36.190Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T17:48:37.193Z] Validating nodejs source
[debug] [2023-09-01T17:48:37.690Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:48:37.690Z] Building nodejs source
[debug] [2023-09-01T17:48:37.690Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:48:37.690Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:48:37.691Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8820

[debug] [2023-09-01T17:48:37.851Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T17:48:45.035Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:48:45.035Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590525035","timestamp":"2023-09-01T17:48:45.035Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media"}}
[debug] [2023-09-01T17:48:45.043Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:48:45.043Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:48:45.044Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:48:45.044Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"3d90da85-c614-41b7-9f78-3edc7688a566","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:45:36.059Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590336059","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:45:36.059Z","updated":"2023-09-01T17:45:36.059Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"1Ih4dfd0OZ21raW+wJCc/B+b7Ig","metadata":{"firebaseStorageDownloadTokens":"9e1f0273-f55f-4108-a4a3-c7da0824b194"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:45:36.059Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590336059","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590336059&alt=media"}}
[debug] [2023-09-01T17:48:45.045Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:48:45.045Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:48:49.427Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:48:49.427Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590529427","timestamp":"2023-09-01T17:48:49.427Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590529398","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:48:49.398Z","updated":"2023-09-01T17:48:49.398Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"KhEvZhL9XKj6KZ7UtXC0f+Rq9co","metadata":{"firebaseStorageDownloadTokens":"8e20108f-34c9-4921-b368-9c77e6d81e74"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:48:49.398Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media"}}
[debug] [2023-09-01T17:48:49.431Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:48:49.431Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:48:49.431Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:48:49.431Z"],"workRunningCount":1}
[debug] [2023-09-01T17:48:49.431Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:48:49.432Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:48:49.432Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:48:49.432Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:48:49.432Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"1804789b-4fe6-4cfa-8452-0f3f8fbc5e1f","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:48:49.398Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590529398","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:48:49.398Z","updated":"2023-09-01T17:48:49.398Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"KhEvZhL9XKj6KZ7UtXC0f+Rq9co","metadata":{"firebaseStorageDownloadTokens":"8e20108f-34c9-4921-b368-9c77e6d81e74"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:48:49.398Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media"}}
[debug] [2023-09-01T17:48:49.433Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:48:49.433Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:48:49.433Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:48:49.433Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:48:49.433Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:48:49.433Z"],"workRunningCount":1}
[debug] [2023-09-01T17:48:49.433Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:48:49.435Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:48:49.435Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:48:49.435Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:48:49.436Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:48:49.436Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:48:49.751Z] [runtime-status] [17627] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:48:49.752Z] [runtime-status] [17627] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:48:49.752Z] [runtime-status] [17627] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:48:49.752Z] [runtime-status] [17627] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:48:49.820Z] [runtime-status] [17627] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:48:49.820Z] [runtime-status] [17627] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:48:49.820Z] [runtime-status] [17627] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:48:49.820Z] [runtime-status] [17627] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:48:49.821Z] [runtime-status] [17627] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:48:49.821Z] [runtime-status] [17627] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:48:49.825Z] [runtime-status] [17627] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:48:49.831Z] [runtime-status] [17627] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:48:49.831Z] [runtime-status] [17627] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ef79ed9d1d46bd8b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ef79ed9d1d46bd8b.sock"}}
[debug] [2023-09-01T17:48:49.842Z] [worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: IDLE"}}
[debug] [2023-09-01T17:48:49.843Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:48:49.843Z] [worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: BUSY"}}
[debug] [2023-09-01T17:48:49.847Z] [runtime-status] [17627] RunBackground {"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590529398","metageneration":"1","contentType":"image/heic","timeCreated":"2023-09-01T17:48:49.398Z","updated":"2023-09-01T17:48:49.398Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"KhEvZhL9XKj6KZ7UtXC0f+Rq9co","metadata":{"firebaseStorageDownloadTokens":"8e20108f-34c9-4921-b368-9c77e6d81e74"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:48:49.398Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media"},"context":{"eventId":"1693590529427","timestamp":"2023-09-01T17:48:49.427Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17627] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"IMG_0686.HEIC\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590529398\",\"metageneration\":\"1\",\"contentType\":\"image/heic\",\"timeCreated\":\"2023-09-01T17:48:49.398Z\",\"updated\":\"2023-09-01T17:48:49.398Z\",\"storageClass\":\"STANDARD\",\"size\":\"3679343\",\"md5Hash\":\"ii80Xb0u/fS996mbCDQeKg==\",\"etag\":\"KhEvZhL9XKj6KZ7UtXC0f+Rq9co\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"8e20108f-34c9-4921-b368-9c77e6d81e74\"},\"crc32c\":\"CaTyBQ==\",\"timeStorageClassUpdated\":\"2023-09-01T17:48:49.398Z\",\"id\":\"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media\"},\"context\":{\"eventId\":\"1693590529427\",\"timestamp\":\"2023-09-01T17:48:49.427Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC\",\"type\":\"storage#object\"}}}"}}
[warn] ⚠  functions: TypeError: mkdirp is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: mkdirp is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T17:48:49.889Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:48:49.889Z] [worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: exited"}}
[debug] [2023-09-01T17:48:49.889Z] [worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-c3e7085d-5e94-4265-a97f-5038bbf602b1]: FINISHED"}}
[debug] [2023-09-01T17:50:21.511Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:50:21.512Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590621511","timestamp":"2023-09-01T17:50:21.511Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","type":"storage#object"},"data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590529398","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:48:49.398Z","updated":"2023-09-01T17:48:49.398Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"KhEvZhL9XKj6KZ7UtXC0f+Rq9co","metadata":{"firebaseStorageDownloadTokens":"8e20108f-34c9-4921-b368-9c77e6d81e74"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:48:49.398Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media"}}
[debug] [2023-09-01T17:50:21.514Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:50:21.514Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:50:21.514Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:50:21.514Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"43a6bcb7-0d91-4056-9aed-7a45847948e8","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/IMG_0686.HEIC","time":"2023-09-01T17:48:49.398Z","data":{"kind":"storage#object","name":"IMG_0686.HEIC","bucket":"misinfo-5d004.appspot.com","generation":"1693590529398","metageneration":"1","contentType":"image/heic","contentDisposition":"inline","timeCreated":"2023-09-01T17:48:49.398Z","updated":"2023-09-01T17:48:49.398Z","storageClass":"STANDARD","size":"3679343","md5Hash":"ii80Xb0u/fS996mbCDQeKg==","etag":"KhEvZhL9XKj6KZ7UtXC0f+Rq9co","metadata":{"firebaseStorageDownloadTokens":"8e20108f-34c9-4921-b368-9c77e6d81e74"},"crc32c":"CaTyBQ==","timeStorageClassUpdated":"2023-09-01T17:48:49.398Z","id":"misinfo-5d004.appspot.com/IMG_0686.HEIC/1693590529398","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/IMG_0686.HEIC?generation=1693590529398&alt=media"}}
[debug] [2023-09-01T17:50:21.517Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:50:21.517Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:50:30.556Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:50:30.557Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590630556","timestamp":"2023-09-01T17:50:30.556Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590630555","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:50:30.555Z","updated":"2023-09-01T17:50:30.555Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"hlX6o5jAjshP20K+3edf33NJXvA","metadata":{"firebaseStorageDownloadTokens":"19db47b7-f028-479b-9fa2-d36acc236eaa"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:50:30.555Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590630555","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media"}}
[debug] [2023-09-01T17:50:30.561Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:50:30.561Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:50:30.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:50:30.561Z"],"workRunningCount":1}
[debug] [2023-09-01T17:50:30.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:50:30.563Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:50:30.563Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:50:30.563Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:50:30.563Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"2d641801-2c48-440d-b701-4340d2271a4d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:50:30.555Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590630555","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:50:30.555Z","updated":"2023-09-01T17:50:30.555Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"hlX6o5jAjshP20K+3edf33NJXvA","metadata":{"firebaseStorageDownloadTokens":"19db47b7-f028-479b-9fa2-d36acc236eaa"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:50:30.555Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590630555","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media"}}
[debug] [2023-09-01T17:50:30.564Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:50:30.564Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:50:30.564Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:50:30.564Z"],"workRunningCount":1}
[debug] [2023-09-01T17:50:30.564Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:50:30.566Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:50:30.566Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:50:30.566Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:50:30.568Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:50:30.568Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:50:30.571Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:50:30.571Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:50:30.887Z] [runtime-status] [17697] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:50:30.888Z] [runtime-status] [17697] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:50:30.888Z] [runtime-status] [17697] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:50:30.889Z] [runtime-status] [17697] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:50:30.956Z] [runtime-status] [17697] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:50:30.956Z] [runtime-status] [17697] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:50:30.956Z] [runtime-status] [17697] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:50:30.957Z] [runtime-status] [17697] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:50:30.957Z] [runtime-status] [17697] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:50:30.957Z] [runtime-status] [17697] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:50:30.961Z] [runtime-status] [17697] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:50:30.967Z] [runtime-status] [17697] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:50:30.967Z] [runtime-status] [17697] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_02a66ee23401c33a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_02a66ee23401c33a.sock"}}
[debug] [2023-09-01T17:50:30.977Z] [worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: IDLE"}}
[debug] [2023-09-01T17:50:30.977Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:50:30.977Z] [worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: BUSY"}}
[debug] [2023-09-01T17:50:30.981Z] [runtime-status] [17697] RunBackground {"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590630555","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:50:30.555Z","updated":"2023-09-01T17:50:30.555Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"hlX6o5jAjshP20K+3edf33NJXvA","metadata":{"firebaseStorageDownloadTokens":"19db47b7-f028-479b-9fa2-d36acc236eaa"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:50:30.555Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590630555","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media"},"context":{"eventId":"1693590630556","timestamp":"2023-09-01T17:50:30.556Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17697] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"test-logo.png\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590630555\",\"metageneration\":\"1\",\"contentType\":\"image/png\",\"timeCreated\":\"2023-09-01T17:50:30.555Z\",\"updated\":\"2023-09-01T17:50:30.555Z\",\"storageClass\":\"STANDARD\",\"size\":\"37257\",\"md5Hash\":\"wnpxq0AIyD66m1VHdaoSyg==\",\"etag\":\"hlX6o5jAjshP20K+3edf33NJXvA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"19db47b7-f028-479b-9fa2-d36acc236eaa\"},\"crc32c\":\"vUTVXA==\",\"timeStorageClassUpdated\":\"2023-09-01T17:50:30.555Z\",\"id\":\"misinfo-5d004.appspot.com/test-logo.png/1693590630555\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media\"},\"context\":{\"eventId\":\"1693590630556\",\"timestamp\":\"2023-09-01T17:50:30.556Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png\",\"type\":\"storage#object\"}}}"}}
[warn] ⚠  functions: TypeError: mkdirp is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: mkdirp is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T17:50:31.026Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:50:31.026Z] [worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: exited"}}
[debug] [2023-09-01T17:50:31.026Z] [worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-e26c78c9-8b60-4f95-bcc8-628315953054]: FINISHED"}}
[debug] [2023-09-01T17:52:02.884Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:02.884Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590722883","timestamp":"2023-09-01T17:52:02.883Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590630555","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:50:30.555Z","updated":"2023-09-01T17:50:30.555Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"hlX6o5jAjshP20K+3edf33NJXvA","metadata":{"firebaseStorageDownloadTokens":"19db47b7-f028-479b-9fa2-d36acc236eaa"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:50:30.555Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590630555","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media"}}
[debug] [2023-09-01T17:52:02.887Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:02.887Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:52:02.887Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:02.887Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"da87a79e-6c8b-462c-a139-d732c9466082","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:50:30.555Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590630555","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:50:30.555Z","updated":"2023-09-01T17:50:30.555Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"hlX6o5jAjshP20K+3edf33NJXvA","metadata":{"firebaseStorageDownloadTokens":"19db47b7-f028-479b-9fa2-d36acc236eaa"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:50:30.555Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590630555","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590630555&alt=media"}}
[debug] [2023-09-01T17:52:02.891Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:02.891Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:52:07.979Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:07.979Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590727978","timestamp":"2023-09-01T17:52:07.978Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590727978","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:52:07.978Z","updated":"2023-09-01T17:52:07.978Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"Wp4zvyaHz95B0uAGYzlaLu249RA","metadata":{"firebaseStorageDownloadTokens":"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:52:07.978Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590727978","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media"}}
[debug] [2023-09-01T17:52:07.980Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:52:07.979Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:52:07.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:52:07.979Z"],"workRunningCount":1}
[debug] [2023-09-01T17:52:07.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:52:07.980Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:07.980Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:52:07.980Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:07.980Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"68d451bc-4c8b-48a1-a557-09cebea0ac4d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:52:07.978Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590727978","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:52:07.978Z","updated":"2023-09-01T17:52:07.978Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"Wp4zvyaHz95B0uAGYzlaLu249RA","metadata":{"firebaseStorageDownloadTokens":"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:52:07.978Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590727978","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media"}}
[debug] [2023-09-01T17:52:07.981Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:07.981Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:52:07.981Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:52:07.981Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:52:07.981Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:52:07.981Z"],"workRunningCount":1}
[debug] [2023-09-01T17:52:07.981Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:52:07.982Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:52:07.982Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:52:07.983Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:52:07.984Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:52:07.984Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:52:08.303Z] [runtime-status] [17872] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:52:08.304Z] [runtime-status] [17872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:52:08.304Z] [runtime-status] [17872] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:52:08.304Z] [runtime-status] [17872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:52:08.368Z] [runtime-status] [17872] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:52:08.368Z] [runtime-status] [17872] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:52:08.368Z] [runtime-status] [17872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:52:08.368Z] [runtime-status] [17872] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:52:08.369Z] [runtime-status] [17872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:52:08.369Z] [runtime-status] [17872] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:52:08.373Z] [runtime-status] [17872] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:52:08.377Z] [runtime-status] [17872] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:52:08.377Z] [runtime-status] [17872] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_5e1dc30667578ff1.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_5e1dc30667578ff1.sock"}}
[debug] [2023-09-01T17:52:08.391Z] [worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: IDLE"}}
[debug] [2023-09-01T17:52:08.391Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:52:08.391Z] [worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: BUSY"}}
[debug] [2023-09-01T17:52:08.395Z] [runtime-status] [17872] RunBackground {"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590727978","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:52:07.978Z","updated":"2023-09-01T17:52:07.978Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"Wp4zvyaHz95B0uAGYzlaLu249RA","metadata":{"firebaseStorageDownloadTokens":"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:52:07.978Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590727978","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media"},"context":{"eventId":"1693590727978","timestamp":"2023-09-01T17:52:07.978Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17872] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"test-logo.png\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590727978\",\"metageneration\":\"1\",\"contentType\":\"image/png\",\"timeCreated\":\"2023-09-01T17:52:07.978Z\",\"updated\":\"2023-09-01T17:52:07.978Z\",\"storageClass\":\"STANDARD\",\"size\":\"37257\",\"md5Hash\":\"wnpxq0AIyD66m1VHdaoSyg==\",\"etag\":\"Wp4zvyaHz95B0uAGYzlaLu249RA\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf\"},\"crc32c\":\"vUTVXA==\",\"timeStorageClassUpdated\":\"2023-09-01T17:52:07.978Z\",\"id\":\"misinfo-5d004.appspot.com/test-logo.png/1693590727978\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media\"},\"context\":{\"eventId\":\"1693590727978\",\"timestamp\":\"2023-09-01T17:52:07.978Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png\",\"type\":\"storage#object\"}}}"}}
[warn] ⚠  functions: TypeError: mkdirp is not a function
    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9
    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)
    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"TypeError: mkdirp is not a function\n    at /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js:42:9\n    at cloudFunction (/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /opt/homebrew/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:144:13)\n    at next (/opt/homebrew/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:140:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T17:52:08.440Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:52:08.440Z] [worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: exited"}}
[debug] [2023-09-01T17:52:08.440Z] [worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-315ce855-ed27-4640-9dda-2ec6e65883a6]: FINISHED"}}
[debug] [2023-09-01T17:52:54.635Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/index.js changed, reloading triggers"}}
[debug] [2023-09-01T17:52:55.637Z] Validating nodejs source
[debug] [2023-09-01T17:52:55.983Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:52:55.983Z] Building nodejs source
[debug] [2023-09-01T17:52:55.983Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:52:55.983Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:52:55.984Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8593

[debug] [2023-09-01T17:52:56.147Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-09-01T17:52:58.967Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:58.967Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590778966","timestamp":"2023-09-01T17:52:58.966Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590727978","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:52:07.978Z","updated":"2023-09-01T17:52:07.978Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"Wp4zvyaHz95B0uAGYzlaLu249RA","metadata":{"firebaseStorageDownloadTokens":"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:52:07.978Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590727978","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media"}}
[debug] [2023-09-01T17:52:58.969Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:58.969Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:52:58.969Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:52:58.969Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"bc4dd78e-ec8f-468c-8120-e2dec8fb129e","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:52:07.978Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590727978","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:52:07.978Z","updated":"2023-09-01T17:52:07.978Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"Wp4zvyaHz95B0uAGYzlaLu249RA","metadata":{"firebaseStorageDownloadTokens":"c03b7a2e-0d26-4aea-a034-2d8815f8d8bf"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:52:07.978Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590727978","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590727978&alt=media"}}
[debug] [2023-09-01T17:52:58.969Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:52:58.969Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T17:53:04.540Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:53:04.541Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590784540","timestamp":"2023-09-01T17:53:04.540Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"},"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693590784540","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T17:53:04.540Z","updated":"2023-09-01T17:53:04.540Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"HQP1V84K858G/qM46hJ9AytEDW0","metadata":{"firebaseStorageDownloadTokens":"a24603d7-9b05-4480-a41f-bf1bccef73e9"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T17:53:04.540Z","id":"misinfo-5d004.appspot.com/univision.webp/1693590784540","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media"}}
[debug] [2023-09-01T17:53:04.543Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:53:04.542Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:53:04.545Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:53:04.542Z"],"workRunningCount":1}
[debug] [2023-09-01T17:53:04.545Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:53:04.549Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:53:04.549Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:53:04.550Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:53:04.550Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"3ca35ee9-6535-419b-8291-32dd90d2b65c","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","time":"2023-09-01T17:53:04.540Z","data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693590784540","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T17:53:04.540Z","updated":"2023-09-01T17:53:04.540Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"HQP1V84K858G/qM46hJ9AytEDW0","metadata":{"firebaseStorageDownloadTokens":"a24603d7-9b05-4480-a41f-bf1bccef73e9"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T17:53:04.540Z","id":"misinfo-5d004.appspot.com/univision.webp/1693590784540","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media"}}
[debug] [2023-09-01T17:53:04.551Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:53:04.551Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:53:04.551Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:53:04.551Z"],"workRunningCount":1}
[debug] [2023-09-01T17:53:04.551Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:53:04.553Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:53:04.553Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:53:04.553Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:53:04.554Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:53:04.554Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:53:04.555Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:53:04.555Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:53:04.875Z] [runtime-status] [17932] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:53:04.875Z] [runtime-status] [17932] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:53:04.875Z] [runtime-status] [17932] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:53:04.876Z] [runtime-status] [17932] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:53:04.938Z] [runtime-status] [17932] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:53:04.938Z] [runtime-status] [17932] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:53:04.938Z] [runtime-status] [17932] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:53:04.939Z] [runtime-status] [17932] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:53:04.939Z] [runtime-status] [17932] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:53:04.939Z] [runtime-status] [17932] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:53:04.943Z] [runtime-status] [17932] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:53:04.947Z] [runtime-status] [17932] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:53:04.947Z] [runtime-status] [17932] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_5b23275ecf8e30d6.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_5b23275ecf8e30d6.sock"}}
[debug] [2023-09-01T17:53:04.961Z] [worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: IDLE"}}
[debug] [2023-09-01T17:53:04.961Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:53:04.961Z] [worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: BUSY"}}
[debug] [2023-09-01T17:53:04.965Z] [runtime-status] [17932] RunBackground {"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693590784540","metageneration":"1","contentType":"image/webp","timeCreated":"2023-09-01T17:53:04.540Z","updated":"2023-09-01T17:53:04.540Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"HQP1V84K858G/qM46hJ9AytEDW0","metadata":{"firebaseStorageDownloadTokens":"a24603d7-9b05-4480-a41f-bf1bccef73e9"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T17:53:04.540Z","id":"misinfo-5d004.appspot.com/univision.webp/1693590784540","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media"},"context":{"eventId":"1693590784540","timestamp":"2023-09-01T17:53:04.540Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [17932] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"univision.webp\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590784540\",\"metageneration\":\"1\",\"contentType\":\"image/webp\",\"timeCreated\":\"2023-09-01T17:53:04.540Z\",\"updated\":\"2023-09-01T17:53:04.540Z\",\"storageClass\":\"STANDARD\",\"size\":\"2338\",\"md5Hash\":\"MJiXVCLGFzhze0z2Kc1ksQ==\",\"etag\":\"HQP1V84K858G/qM46hJ9AytEDW0\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"a24603d7-9b05-4480-a41f-bf1bccef73e9\"},\"crc32c\":\"59RijA==\",\"timeStorageClassUpdated\":\"2023-09-01T17:53:04.540Z\",\"id\":\"misinfo-5d004.appspot.com/univision.webp/1693590784540\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media\"},\"context\":{\"eventId\":\"1693590784540\",\"timestamp\":\"2023-09-01T17:53:04.540Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp\",\"type\":\"storage#object\"}}}"}}
[info] >  {"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/univision.webp"} {"user":{"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/univision.webp"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/univision.webp\"}"}}
[warn] ⚠  functions: Error: spawn convert ENOENT
    at ChildProcess._handle.onexit (node:internal/child_process:286:19)
    at onErrorNT (node:internal/child_process:484:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Error: spawn convert ENOENT\n    at ChildProcess._handle.onexit (node:internal/child_process:286:19)\n    at onErrorNT (node:internal/child_process:484:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T17:53:05.022Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:53:05.023Z] [worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: exited"}}
[debug] [2023-09-01T17:53:05.023Z] [worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-4da9b6f0-03e8-4614-b281-0b599169f536]: FINISHED"}}
[debug] [2023-09-01T17:54:09.120Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T17:54:09.121Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T17:54:10.122Z] Validating nodejs source
[debug] [2023-09-01T17:54:10.613Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "imagemagick": "^0.1.3",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:54:10.613Z] Building nodejs source
[debug] [2023-09-01T17:54:10.613Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:54:10.614Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:54:10.614Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8985

[debug] [2023-09-01T17:54:10.766Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T17:54:23.682Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:54:23.683Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590863682","timestamp":"2023-09-01T17:54:23.682Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","type":"storage#object"},"data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693590784540","metageneration":"1","contentType":"image/webp","contentDisposition":"inline","timeCreated":"2023-09-01T17:53:04.540Z","updated":"2023-09-01T17:53:04.540Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"HQP1V84K858G/qM46hJ9AytEDW0","metadata":{"firebaseStorageDownloadTokens":"a24603d7-9b05-4480-a41f-bf1bccef73e9"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T17:53:04.540Z","id":"misinfo-5d004.appspot.com/univision.webp/1693590784540","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media"}}
[debug] [2023-09-01T17:54:23.687Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:54:23.687Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:54:23.687Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:54:23.687Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"35913fd6-85dc-4b8d-84bb-784f76da2cc0","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/univision.webp","time":"2023-09-01T17:53:04.540Z","data":{"kind":"storage#object","name":"univision.webp","bucket":"misinfo-5d004.appspot.com","generation":"1693590784540","metageneration":"1","contentType":"image/webp","contentDisposition":"inline","timeCreated":"2023-09-01T17:53:04.540Z","updated":"2023-09-01T17:53:04.540Z","storageClass":"STANDARD","size":"2338","md5Hash":"MJiXVCLGFzhze0z2Kc1ksQ==","etag":"HQP1V84K858G/qM46hJ9AytEDW0","metadata":{"firebaseStorageDownloadTokens":"a24603d7-9b05-4480-a41f-bf1bccef73e9"},"crc32c":"59RijA==","timeStorageClassUpdated":"2023-09-01T17:53:04.540Z","id":"misinfo-5d004.appspot.com/univision.webp/1693590784540","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/univision.webp?generation=1693590784540&alt=media"}}
[debug] [2023-09-01T17:54:23.688Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:54:23.688Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:54:31.478Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:54:31.478Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693590871478","timestamp":"2023-09-01T17:54:31.478Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590871477","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:54:31.478Z","updated":"2023-09-01T17:54:31.478Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"q4N9w8LTFjd2S3yw34GuYMbSnZc","metadata":{"firebaseStorageDownloadTokens":"d1d0a5ac-5656-4faf-9fc7-23505f92b954"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:54:31.478Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590871477","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media"}}
[debug] [2023-09-01T17:54:31.481Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:54:31.481Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:54:31.481Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:54:31.481Z"],"workRunningCount":1}
[debug] [2023-09-01T17:54:31.481Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:54:31.482Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:54:31.482Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:54:31.482Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T17:54:31.482Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"f0bebb47-378b-4037-9c5b-893b5a95c7cc","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:54:31.478Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590871477","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:54:31.478Z","updated":"2023-09-01T17:54:31.478Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"q4N9w8LTFjd2S3yw34GuYMbSnZc","metadata":{"firebaseStorageDownloadTokens":"d1d0a5ac-5656-4faf-9fc7-23505f92b954"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:54:31.478Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590871477","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media"}}
[debug] [2023-09-01T17:54:31.488Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T17:54:31.488Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T17:54:31.489Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:54:31.489Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:54:31.489Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T17:54:31.489Z"],"workRunningCount":1}
[debug] [2023-09-01T17:54:31.490Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T17:54:31.492Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T17:54:31.493Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T17:54:31.493Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T17:54:31.497Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T17:54:31.497Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T17:54:31.812Z] [runtime-status] [18063] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:54:31.812Z] [runtime-status] [18063] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:54:31.813Z] [runtime-status] [18063] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T17:54:31.813Z] [runtime-status] [18063] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:54:31.876Z] [runtime-status] [18063] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T17:54:31.876Z] [runtime-status] [18063] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T17:54:31.877Z] [runtime-status] [18063] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:54:31.877Z] [runtime-status] [18063] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T17:54:31.877Z] [runtime-status] [18063] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T17:54:31.877Z] [runtime-status] [18063] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T17:54:31.881Z] [runtime-status] [18063] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T17:54:31.885Z] [runtime-status] [18063] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T17:54:31.886Z] [runtime-status] [18063] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ab183ccb66da3d44.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_ab183ccb66da3d44.sock"}}
[debug] [2023-09-01T17:54:31.904Z] [worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: IDLE"}}
[debug] [2023-09-01T17:54:31.905Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T17:54:31.905Z] [worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: BUSY"}}
[debug] [2023-09-01T17:54:31.909Z] [runtime-status] [18063] RunBackground {"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590871477","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T17:54:31.478Z","updated":"2023-09-01T17:54:31.478Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"q4N9w8LTFjd2S3yw34GuYMbSnZc","metadata":{"firebaseStorageDownloadTokens":"d1d0a5ac-5656-4faf-9fc7-23505f92b954"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:54:31.478Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590871477","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media"},"context":{"eventId":"1693590871478","timestamp":"2023-09-01T17:54:31.478Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18063] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"test-logo.png\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693590871477\",\"metageneration\":\"1\",\"contentType\":\"image/png\",\"timeCreated\":\"2023-09-01T17:54:31.478Z\",\"updated\":\"2023-09-01T17:54:31.478Z\",\"storageClass\":\"STANDARD\",\"size\":\"37257\",\"md5Hash\":\"wnpxq0AIyD66m1VHdaoSyg==\",\"etag\":\"q4N9w8LTFjd2S3yw34GuYMbSnZc\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"d1d0a5ac-5656-4faf-9fc7-23505f92b954\"},\"crc32c\":\"vUTVXA==\",\"timeStorageClassUpdated\":\"2023-09-01T17:54:31.478Z\",\"id\":\"misinfo-5d004.appspot.com/test-logo.png/1693590871477\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media\"},\"context\":{\"eventId\":\"1693590871478\",\"timestamp\":\"2023-09-01T17:54:31.478Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png\",\"type\":\"storage#object\"}}}"}}
[info] >  {"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png"} {"user":{"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png\"}"}}
[warn] ⚠  functions: Error: spawn convert ENOENT
    at ChildProcess._handle.onexit (node:internal/child_process:286:19)
    at onErrorNT (node:internal/child_process:484:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Error: spawn convert ENOENT\n    at ChildProcess._handle.onexit (node:internal/child_process:286:19)\n    at onErrorNT (node:internal/child_process:484:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T17:54:31.967Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T17:54:31.968Z] [worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: exited"}}
[debug] [2023-09-01T17:54:31.968Z] [worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-171b93ae-dc7a-4024-89ab-3e68d1247b78]: FINISHED"}}
[debug] [2023-09-01T17:59:25.866Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T17:59:26.868Z] Validating nodejs source
[debug] [2023-09-01T17:59:27.239Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "imagemagick": "^0.1.3",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T17:59:27.239Z] Building nodejs source
[debug] [2023-09-01T17:59:27.239Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T17:59:27.240Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T17:59:27.240Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8454

[debug] [2023-09-01T17:59:27.409Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
[debug] [2023-09-01T18:00:03.744Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T18:00:03.745Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693591203743","timestamp":"2023-09-01T18:00:03.743Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590871477","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:54:31.478Z","updated":"2023-09-01T17:54:31.478Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"q4N9w8LTFjd2S3yw34GuYMbSnZc","metadata":{"firebaseStorageDownloadTokens":"d1d0a5ac-5656-4faf-9fc7-23505f92b954"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:54:31.478Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590871477","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media"}}
[debug] [2023-09-01T18:00:03.751Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T18:00:03.751Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T18:00:03.752Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T18:00:03.752Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"1abd7966-f359-4ca1-b7f7-a75f59b8d1de","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T17:54:31.478Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693590871477","metageneration":"1","contentType":"image/png","contentDisposition":"inline","timeCreated":"2023-09-01T17:54:31.478Z","updated":"2023-09-01T17:54:31.478Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"q4N9w8LTFjd2S3yw34GuYMbSnZc","metadata":{"firebaseStorageDownloadTokens":"d1d0a5ac-5656-4faf-9fc7-23505f92b954"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T17:54:31.478Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693590871477","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693590871477&alt=media"}}
[debug] [2023-09-01T18:00:03.754Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T18:00:03.754Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T18:00:08.617Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T18:00:08.618Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"eventId":"1693591208617","timestamp":"2023-09-01T18:00:08.617Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"},"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693591208617","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T18:00:08.617Z","updated":"2023-09-01T18:00:08.617Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"p1ej9JwVlQ5aXu6kNRdMjfLXsBo","metadata":{"firebaseStorageDownloadTokens":"6d4b4647-ce97-4588-89b8-6c7dba4ef6eb"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T18:00:08.617Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693591208617","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693591208617&alt=media"}}
[debug] [2023-09-01T18:00:08.619Z] [work-queue] {"queuedWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T18:00:08.619Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T18:00:08.619Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-firstGenGenerateThumbnail-0-2023-09-01T18:00:08.619Z"],"workRunningCount":1}
[debug] [2023-09-01T18:00:08.619Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T18:00:08.620Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T18:00:08.620Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T18:00:08.620Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast [none]
[debug] [2023-09-01T18:00:08.620Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"specversion":"1.0","id":"9f8bf6c2-2d2e-4e4d-96fb-8dd1cb86585d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","time":"2023-09-01T18:00:08.617Z","data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693591208617","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T18:00:08.617Z","updated":"2023-09-01T18:00:08.617Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"p1ej9JwVlQ5aXu6kNRdMjfLXsBo","metadata":{"firebaseStorageDownloadTokens":"6d4b4647-ce97-4588-89b8-6c7dba4ef6eb"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T18:00:08.617Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693591208617","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693591208617&alt=media"}}
[debug] [2023-09-01T18:00:08.622Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast 200
[debug] [2023-09-01T18:00:08.622Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/misinfo-5d004/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-09-01T18:00:08.622Z] [work-queue] {"queuedWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T18:00:08.622Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T18:00:08.622Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0-2023-09-01T18:00:08.622Z"],"workRunningCount":1}
[debug] [2023-09-01T18:00:08.622Z] Accepted request POST /functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0 --> us-central1-firstGenGenerateThumbnail-0
[debug] [2023-09-01T18:00:08.628Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-01T18:00:08.629Z] [functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/misinfo-5d004/triggers/us-central1-firstGenGenerateThumbnail-0, mapping to path=/functions/projects/"}}
[debug] [2023-09-01T18:00:08.629Z] [worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-firstGenGenerateThumbnail: 1 --> 0"}}
[debug] [2023-09-01T18:00:08.632Z] [worker-pool] addWorker(us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-firstGenGenerateThumbnail)"}}
[debug] [2023-09-01T18:00:08.632Z] [worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-firstGenGenerateThumbnail, total=1"}}
[debug] [2023-09-01T18:00:08.957Z] [runtime-status] [18409] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T18:00:08.958Z] [runtime-status] [18409] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T18:00:08.958Z] [runtime-status] [18409] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-01T18:00:08.958Z] [runtime-status] [18409] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T18:00:09.022Z] [runtime-status] [18409] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-09-01T18:00:09.022Z] [runtime-status] [18409] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-09-01T18:00:09.022Z] [runtime-status] [18409] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T18:00:09.023Z] [runtime-status] [18409] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-09-01T18:00:09.023Z] [runtime-status] [18409] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-09-01T18:00:09.023Z] [runtime-status] [18409] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-09-01T18:00:09.027Z] [runtime-status] [18409] initializeApp(DEFAULT) {"storageBucket":"misinfo-5d004.appspot.com","projectId":"misinfo-5d004"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] initializeApp(DEFAULT) {\"storageBucket\":\"misinfo-5d004.appspot.com\",\"projectId\":\"misinfo-5d004\"}"}}
[debug] [2023-09-01T18:00:09.031Z] [runtime-status] [18409] Functions runtime initialized. {"cwd":"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions","node_version":"20.5.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Functions runtime initialized. {\"cwd\":\"/Users/lukey/Sites/misinfo/misinfo-dashboard/functions\",\"node_version\":\"20.5.1\"}"}}
[debug] [2023-09-01T18:00:09.031Z] [runtime-status] [18409] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_fc251d64da453648.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] Listening to port: /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/fire_emu_fc251d64da453648.sock"}}
[debug] [2023-09-01T18:00:09.039Z] [worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: IDLE"}}
[debug] [2023-09-01T18:00:09.039Z] [worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-firstGenGenerateThumbnail)"}}
[info] i  functions: Beginning execution of "us-central1-firstGenGenerateThumbnail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Beginning execution of \"us-central1-firstGenGenerateThumbnail\""}}
[debug] [2023-09-01T18:00:09.039Z] [worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: BUSY"}}
[debug] [2023-09-01T18:00:09.043Z] [runtime-status] [18409] RunBackground {"data":{"kind":"storage#object","name":"test-logo.png","bucket":"misinfo-5d004.appspot.com","generation":"1693591208617","metageneration":"1","contentType":"image/png","timeCreated":"2023-09-01T18:00:08.617Z","updated":"2023-09-01T18:00:08.617Z","storageClass":"STANDARD","size":"37257","md5Hash":"wnpxq0AIyD66m1VHdaoSyg==","etag":"p1ej9JwVlQ5aXu6kNRdMjfLXsBo","metadata":{"firebaseStorageDownloadTokens":"6d4b4647-ce97-4588-89b8-6c7dba4ef6eb"},"crc32c":"vUTVXA==","timeStorageClassUpdated":"2023-09-01T18:00:08.617Z","id":"misinfo-5d004.appspot.com/test-logo.png/1693591208617","selfLink":"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693591208617&alt=media"},"context":{"eventId":"1693591208617","timestamp":"2023-09-01T18:00:08.617Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[runtime-status] [18409] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"test-logo.png\",\"bucket\":\"misinfo-5d004.appspot.com\",\"generation\":\"1693591208617\",\"metageneration\":\"1\",\"contentType\":\"image/png\",\"timeCreated\":\"2023-09-01T18:00:08.617Z\",\"updated\":\"2023-09-01T18:00:08.617Z\",\"storageClass\":\"STANDARD\",\"size\":\"37257\",\"md5Hash\":\"wnpxq0AIyD66m1VHdaoSyg==\",\"etag\":\"p1ej9JwVlQ5aXu6kNRdMjfLXsBo\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"6d4b4647-ce97-4588-89b8-6c7dba4ef6eb\"},\"crc32c\":\"vUTVXA==\",\"timeStorageClassUpdated\":\"2023-09-01T18:00:08.617Z\",\"id\":\"misinfo-5d004.appspot.com/test-logo.png/1693591208617\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/misinfo-5d004.appspot.com/o/test-logo.png?generation=1693591208617&alt=media\"},\"context\":{\"eventId\":\"1693591208617\",\"timestamp\":\"2023-09-01T18:00:08.617Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/misinfo-5d004.appspot.com/objects/test-logo.png\",\"type\":\"storage#object\"}}}"}}
[info] >  {"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png"} {"user":{"severity":"INFO","message":"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"The file has been downloaded to /var/folders/5r/dmw3c_x54y5cvr8rnc3cptz40000gn/T/test-logo.png\"}"}}
[warn] ⚠  functions: Error: spawn convert ENOENT
    at ChildProcess._handle.onexit (node:internal/child_process:286:19)
    at onErrorNT (node:internal/child_process:484:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Error: spawn convert ENOENT\n    at ChildProcess._handle.onexit (node:internal/child_process:286:19)\n    at onErrorNT (node:internal/child_process:484:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-01T18:00:09.102Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-01T18:00:09.102Z] [worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: exited"}}
[debug] [2023-09-01T18:00:09.102Z] [worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-firstGenGenerateThumbnail"},"extension":{},"message":"[worker-us-central1-firstGenGenerateThumbnail-9627bb4e-24fa-4205-9b60-ce2b3c8f93d8]: FINISHED"}}
[debug] [2023-09-01T18:01:04.505Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package.json changed, reloading triggers"}}
[debug] [2023-09-01T18:01:04.605Z] File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/package-lock.json changed, reloading triggers"}}
[debug] [2023-09-01T18:01:05.608Z] Validating nodejs source
[debug] [2023-09-01T18:01:06.091Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js,.ts",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^7.0.1",
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "imagemagick": "^0.1.3",
    "mkdirp": "^3.0.1"
  },
  "devDependencies": {
    "@types/child-process-promise": "^2.2.2",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true,
  "browser": {
    "fs": false,
    "child_process": false
  }
}
[debug] [2023-09-01T18:01:06.092Z] Building nodejs source
[debug] [2023-09-01T18:01:06.092Z] Failed to find version of module node: reached end of search path /Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2023-09-01T18:01:06.092Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-01T18:01:06.092Z] Found firebase-functions binary at '/Users/lukey/Sites/misinfo/misinfo-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8547

[debug] [2023-09-01T18:01:06.250Z] Got response from /__/functions.yaml {"endpoints":{"firstGenGenerateThumbnail":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/misinfo-5d004.appspot.com"},"retry":false},"labels":{},"entryPoint":"firstGenGenerateThumbnail"},"addUserRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addUserRole"},"addAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAdminRole"},"addAgencyRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"addAgencyRole"},"viewRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"viewRole"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: firstGenGenerateThumbnail, addUserRole, addAdminRole, addAgencyRole, viewRole."}}
